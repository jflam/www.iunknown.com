<!-- Published by Fog Creek Software CityDesk CQSXKDXJHSYDVISL/5193B323/328 -->


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Code generation comments from Pieter Hintjens</title>
  <link rel="stylesheet" href="../iunknown.css"/>
  <script type="text/javascript" src="http://www.haloscan.com/load.php?user=jlam"></script>
  <script language="javascript">
    function HaloScan2( id ) {
      location.href='http://www.haloscan.com/comments.php?user=jlam&comment='+id;
    }
  </script>
</head>
<body>
  <a href="http://www.iunknown.com"><img src="../Images/iunknown.png" width="350" height="60" border="0"></a> 
  <table width="700px" border="0" cellspacing="10">
    <tr>
      <td width="76%" valign="top">
        <div class="entryTitle">Code generation comments from Pieter Hintjens</div>
        <div class="entryDate">2003-04-18</div>
        <p><P>Pieter Hintjens is one of the creators of <A href="GSLgenupdated.html">GSLgen</A>. Recently, Pieter left a very insightful comment under my <A href="Whenlessismore.html">code generation epiphany piece</A> that I'd like to replicate here on my weblog where more folks are likely to read it:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P>John, your insights into the why of code generation are excellent. It took me <BR>a long time to come to the same conclusion, that the power came from <BR>abstraction and not reuse. By the way, let me introduce myself: I'm one <BR>of the authors of GSLgen, along with my long-time friend Jonathan Schultz. </P>
<P>The surprise with GSLgen is not that it works powerfully (it was very <BR>carefully designed to be powerful). The surprise is that people are <BR>surprised by it. </P>
<P>I wrote an article for DDJ in 1999 about GSLgen and code generation. <BR>Now, I've written a couple of articles for this magazine, and I know the <BR>editor, yet they found that code generation was so obscure and such a <BR>bizarre idea that they did not publish the article. </P>
<P>And yet, how else can you abstract your ideas up from the banal level of <BR>writing code line by painful line? </P>
<P>I began writing code generators with Leif Svalgaard in 1985, in COBOL, <BR>part of a huge toolkit that generated portable COBOL applications for <BR>mainframes, minis, PCs. Our first code generators were very specific: <BR>generate database code, generate forms, whatever. You can still see <BR>echoes of this in my Libero tool (www.imatix.com) which generates code <BR>for state machines. State machines are a very powerful abstraction, much <BR>loved by telecoms programmers, and Libero (which DDJ did print an <BR>article on) has been widely used since it was released in 1992 or so. </P>
<P>GSLgen does everything Libero does, but for an infinitely wider set of <BR>abstractions. While Libero says: "here, we've developed this nice <BR>abstraction, and here is a code generator that implements it", GSLgen <BR>says "here is a way of defining and implementing arbitrary <BR>abstractions." </P>
<P>This is not a freedom that many people can use. It's the white paper <BR>problem. You may be free to draw anything you like, but it only works <BR>if you're a capable artist. So much easier to color by numbers! <BR>Good abstractions take many years to develop and refine. Sure: interfaces, <BR>test cases, SQL... these are trivial. But how about an abstraction for a<BR>mobile phone interface that will generate the tens of thousands of lines of <BR>code that implement it? </P>
<P>The combination of XML plus 'simple scripting language' is very potent. <BR>When that scripting language is intended for human use (not like XSLT <BR>which is potently awful to use), and aims at code generation (doing <BR>small but valuable data manglings), you get a tool like GSLgen. </P>
<P>Our company - iMatix - does just about everything through GSLgen. We <BR>simply don't write code by hand any more, unless it's GSL scripts, or <BR>XML abstractions. What does this give us? It's hard to compare <BR>efficiency because so much depends on the actual value of the resulting <BR>applications, but we can build complex applications for about 10% of the <BR>cost of other teams. That's a 90% saving... and about half of the <BR>remaining cost is in things like testing and building that we don't yet <BR>automate enough. GSLs produces near perfect code, at about 1/10th the <BR>cost of writing code by hand, and it's code that costs almost nothing to <BR>maintain. This gives you some idea of how we're breaking the rules of <BR>traditional software engineering. <BR><BR>Since GSL/2 was released, we've continued pushing the language towards <BR>something more like a modern OOP scripting language. The first GSL syntax <BR>was truly minimalistic: just enough to work through the XML tree and <BR>produce output under various conditions. When we made GSL/1 in 1996, <BR>we'd been developing this 'minimalistic' language for about ten years. <BR>Again, if you know any of the iMatix tools, you'll see echoes of it in <BR>Libero and Htmlpp. Designing a language that mixes well with code is <BR>a prerequisite for template-based code generation. <BR><BR>It's not really necessary to be able to (e.g.) access databases in a <BR>code generator, but when you get used to playing with XML abstractions, <BR>you start to thing: "why not build a web server in GSL... and handle the <BR>configuration file as an abstraction...?" All it needs is socket i/o. Check. <BR>Process control. Check. Multithreading. Check. Since GSL/3, the GSLgen <BR>engine has been a multithreaded affair built using our SMT kernel. We have <BR>this habit at iMatix of making bizarrely useful things (like Xitami). And most of <BR>this technology is now going into GSLgen. <BR><BR>As far as we know, GSLgen is a unique thing in the software world: <BR>not so much a code generator as a way of making arbitrary code <BR>generators. As John Lam said, it takes a stubborn mind to make that <BR>worth something. But in this industry we're faced with a fundamental <BR>problem. We keep changing the languages we use, thinking that if only we <BR>can move from C++ to Java, from VB to C#, all our problems will go away. <BR>What we forget is that each move means rewriting years of work. Throw it <BR>all out, start again. It's a sad waste of our lives. With code <BR>generation, you can escape this cycle. Abstractions are immortal. <BR>Abstractions can live forever. Not five years, ten years, but as long <BR>as there is software running on computers. This is why Libero is still <BR>popular and highly useful more than a decade after I wrote it. Migrating <BR>your code generators to a new language is often a matter of a few days <BR>or weeks only. If you do it right (ah, grasshopper, try again) you will <BR>find yourself floating above the language wars. 
<P>It takes a stubborn mind to think of todays' work in terms of tomorrow. <BR>But it's worth it, and for professional programmers who value their time, <BR>it seems to be one of the few avenues open.</P></BLOCKQUOTE><img src="../Images/blue_button.jpg" alt="Permanent Link" width="18" height="18" align="top"></p>
        <a href="javascript:HaloScan2('Weblog/Codegenerationcommentsfro.html');"><script type="text/javascript">postCount('Weblog/Codegenerationcommentsfro.html');</script></a>
      </td>
      <td width="24%" valign="top">
        <a href="http://www.iunknown.com/rss.xml"><img src="../Images/xml.png" width="36" height="14" border="0"></a>
  
        <p><img src="../Images/about.png" width="100" height="25"></p>
        <div class="aboutEntry"> 
          
            <A href="../About/Aboutme.html">About me</A><br>
          
            <A href="../About/fog0000000006.html">About this site</A><br>
          
            <A href="../About/fog0000000010.html">My plan</A><br>
          
            <A href="../About/fog0000000009.html">My other life</A><br>
          
            <A href="../About/fog0000000008.html">My products</A><br>
          
            <A href="../About/fog0000000013.html">My publications</A><br>
          
        </div>

        <p><img src="../Images/archives.png" width="100" height="25"></p>
        <div class="archiveEntry">
         
           <A href="../Archives/April2003.html">April 2003</A><br>
         
           <A href="../Archives/March2003.html">March 2003</A><br>
         
           <A href="../Archives/February2003.html">February 2003</A><br>
         
           <A href="../Archives/January2003.html">January 2003</A><br>
         
           <A href="../Archives/December2002.html">December 2002</A><br>
         
           <A href="../Archives/November2002.html">November 2002</A><br>
         
           <A href="../Archives/October2002.html">October 2002</A><br>
         
           <A href="../Archives/September2002.html">September 2002</A><br>
         
           <A href="../Archives/August2002.html">August 2002</A><br>
         
           <A href="../Archives/July2002.html">July 2002</A><br>
         
           <A href="../Archives/June2002.html">June 2002</A><br>
         
           <A href="../Archives/May2002.html">May 2002</A><br>
         
           <A href="../Archives/April2002.html">April 2002</A><br>
         
           <A href="../Archives/fog0000000116.html">March 2002</A><br>
         
           <A href="../Archives/fog0000000091.html">February 2002</A><br>
         
           <A href="../Archives/fog0000000046.html">January 2002</A><br>
         
           <A href="../Archives/fog0000000030.html">December 2001</A><br>
         
        </div>

        <p><img src="../Images/articles.png" width="100" height="25"></p>
        <div class="articleEntry">
          
            - <A href="../Articles/Booksuggestions.html">Book suggestions</A><br>
          
            - <A href="../Articles/fog0000000082.html">Interface dispatch vs. object reference dispatch</A><br>
          
            - <A href="../Articles/fog0000000065.html">x86 Resources</A><br>
          
            - <A href="../Articles/fog0000000041.html">Entertainment PC's Part 2</A><br>
          
            - <A href="../Articles/fog0000000034.html">Entertainment PC's</A><br>
          
            - <A href="../Articles/fog0000000025.html">Hello CppUnit</A><br>
          
        </div>

        <p><img src="../Images/links.png" width="100" height="25"></p>
        <div class="linkEntry">
          <a href="http://www.gotdotnet.com/team/dbox/spoutlet.aspx">Don Box</a><br>
          <a href="http://www.stronglytyped.com/">Richard Caetano</a><br>
          <a href="http://www.razorsoft.net/weblog/">Peter Drayton</a><br>
          <a href="http://radio.weblogs.com/0109845/">Jeroen Frijters</a><br>
          <a href="http://radio.weblogs.com/0105852/">Sam Gentile</a><br>
          <a href="http://radio.weblogs.com/0106747/">Scott Hanselman</a><br>
          <a href="http://radio.weblogs.com/0104813/">Drew Marsh</a><br>
          <a href="http://www.dotnetremoting.cc/dotnetcentric/">Ingo Rammer</a><br>
          <a href="http://www.winterdom.com/weblog/">Tomas Restrepo</a><br>
          <a href="http://www.sellsbrothers.com/">Chris Sells</a><br>
          <a href="http://www.joelonsoftware.com/">Joel Spolsky</a><br>
          <a href="http://radio.weblogs.com/0108971/">Clemens Vasters</a><br>
          <a href="http://staff.develop.com/jasonw/weblog/">Jason Whittington</a><br>
          <a href="http://dotnetguy.techieswithcats.com/">Brad Wilson</a><br>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
