var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.6";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(w.isNumber(a.length)){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){!e&&f===0?(c=a,e=!0):c=b.call(d,c,a,f,g)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b);var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e=b.call(d,a,f,g))return c}),e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(y(a,function(a){if(c=a===b)return!0}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?a:w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){return w.isArray(b)?a.concat(w.flatten(b)):(a[a.length]=b,a)},[])},w.without=function(a){var b=g.call(arguments,1);return w.filter(a,function(a){return!w.include(b,a)})},w.uniq=w.unique=function(a,b){return w.reduce(a,function(a,c,d){if(0==d||(b===!0?w.last(a)!=c:!w.include(a,c)))a[a.length]=c;return a},[])},w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){var b=g.call(arguments);for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){return w.filter(w.keys(a),function(b){return w.isFunction(a[b])}).sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b)||!w.isEqual(a[g],b[g]))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)==="[object Array]"},w.isArguments=function(a){return!!a&&!!j.call(a,"callee")},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){return b.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}();var Haml;(function(){function trim(a){return a.replace(/^\s+|\s+$/g,"")}function html_escape(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}function render_attribs(a){var b,c,d=[];for(b in a)if(b!=="_content"&&a.hasOwnProperty(b))switch(a[b]){case"undefined":case"false":case"null":case'""':break;default:try{c=JSON.parse("["+a[b]+"]")[0],c===!0?c=b:typeof c=="string"&&embedder.test(c)?c='" +\n'+parse_interpol(html_escape(c))+' +\n"':c=html_escape(c),d.push(" "+b+'=\\"'+c+'\\"')}catch(e){d.push(" "+b+'=\\"" + '+escaperName+"("+a[b]+') + "\\"')}}return d.join("")}function parse_attribs(a){function n(){if(typeof m.start=="number"&&typeof m.middle=="number"&&typeof m.end=="number"){var c=trim(a.substr(m.start,m.middle-m.start)),d=trim(a.substr(m.middle+1,m.end-m.middle-1));b[c]=d}m={start:null,middle:null,end:null}}var b={},c=a.length,d,e,f=1,g=!1,h=!1,i,j,k,l,m={start:1,middle:null,end:null};if(c>0&&(a.charAt(0)==="{"||a.charAt(0)==="(")){i=a.charAt(0),j=i==="{"?"}":")",k=i==="{"?":":"=",l=i==="{"?",":" ";for(d=1;f>0;d+=1){if(d>c)throw"Malformed attribute block";e=a.charAt(d);if(h)h=!1;else if(g)e==="\\"&&(h=!0),e===g&&(g=!1);else{if(e==='"'||e==="'")g=e;if(f===1){e===k&&(m.middle=d);if(e===l||e===j)m.end=d,n(),e===l&&(m.start=d+1)}if(e===i||e==="(")f+=1;if(e===j||f>1&&e===")")f-=1}}return b._content=a.substr(d,a.length),b}return{_content:a[0]===" "?a.substr(1,c):a}}function parse_interpol(a){var b=[],c=0,d=0,e;for(;;){d=a.substr(c).search(embedder);if(d<0){c<a.length&&b.push(JSON.stringify(a.substr(c)));break}b.push(JSON.stringify(a.substr(c,d))),c+=d,e=a.substr(c).match(embedder),d=e[0].length;if(d<0)break;e[1]==="#"?b.push(escaperName+"("+(e[2]||e[3])+")"):b.push(e[2]||e[3]),c+=d}return _.filter(b,function(a){return a&&a.length>0}).join(" +\n")}function compile(a){var b=!1,c=[];typeof a=="string"&&(a=trim(a).replace(/\n\r|\r/g,"\n").split("\n")),_.each(a,function(a){var d,e=!1;if(b){d=b.check_indent.exec(a);if(d){b.contents.push(d[1]||"");return}c.push(b.process()),b=!1}_.each(matchers,function(c){e||(d=c.regexp.exec(a),d&&(b={contents:[],indent_level:d[1],matches:d,check_indent:new RegExp("^(?:\\s*|"+d[1]+"  (.*))$"),process:c.process,render_contents:function(){return compile(this.contents)}},e=!0))}),e||c.push(function(){function b(){try{return escaperName+"("+JSON.stringify(JSON.parse(a))+")"}catch(b){return escaperName+"("+a+")"}}function c(){try{return parse_interpol(JSON.parse(a))}catch(b){return a}}return a[0]==="\\"?parse_interpol(a.substr(1,a.length)):a.substr(0,2)==="&="?(a=trim(a.substr(2,a.length)),b()):a.substr(0,2)==="!="?(a=trim(a.substr(2,a.length)),c()):a[0]==="="?(a=trim(a.substr(1,a.length)),escapeHtmlByDefault?b():c()):parse_interpol(a)}())}),b&&c.push(b.process());var d=_.filter(c,function(a){return a&&a.length>0}).join(" +\n");return d.length==0&&(d='""'),d}function optimize(a){function f(){c.length>0&&(b.push(JSON.stringify(c.join(""))+e),c=[])}var b=[],c=[],d,e;return _.each(a.replace(/\n\r|\r/g,"\n").split("\n"),function(a){d=a.match(/^(\".*\")(\s*\+\s*)?$/);if(!d){f(),b.push(a);return}e=d[2]||"",d=d[1];try{c.push(JSON.parse(d))}catch(g){f(),b.push(a)}}),f(),b.join("\n")}function render(a,b){b=b||{},a=a||"";var c=compile(a,b);return b.optimize&&(c=Haml.optimize(c)),execute(c,b.context||Haml,b.locals)}function execute(js,self,locals){return function(){with(locals||{})try{var _$output;return eval("("+js+")"),_$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}.call(self)}var matchers,self_close_tags,embedder,forceXML,escaperName,escapeHtmlByDefault;embedder=/([#!])\{([^}]*)\}/,self_close_tags=["meta","img","link","br","hr","input","area","base"],matchers=[{name:"html tags",regexp:/^(\s*)((?:[.#%][a-z_\-][a-z0-9_:\-]*)+)(.*)$/i,process:function(){var a,b,c,d,e,f,g,h={},i;a=this.matches[2],c=a.match(/\.([a-z_\-][a-z0-9_\-]*)/gi),d=a.match(/\#([a-z_\-][a-z0-9_\-]*)/gi),b=a.match(/\%([a-z_\-][a-z0-9_:\-]*)/gi),b=b?b[0].substr(1,b[0].length):"div",e=this.matches[3];if(e){e=parse_attribs(e);if(e._content){var j=e._content.charAt(0),k=e._content.charAt(1),l=0;j=="<"?(l++,h.inside=!0,k==">"&&(l++,h.around=!0)):j==">"&&(l++,h.around=!0,k=="<"&&(l++,h.inside=!0)),e._content=e._content.substr(l),this.contents.unshift(trim(e._content)),delete e._content}}else e={};if(c){c=_.map(c,function(a){return a.substr(1,a.length)}).join(" ");if(e["class"])try{e["class"]=JSON.stringify(c+" "+JSON.parse(e["class"]))}catch(m){e["class"]=JSON.stringify(c+" ")+" + "+e["class"]}else e["class"]=JSON.stringify(c)}d&&(d=_.map(d,function(a){return a.substr(1,a.length)}).join(" "),e.id?e.id=JSON.stringify(d+" ")+e.id:e.id=JSON.stringify(d)),e=render_attribs(e),f=this.render_contents(),f==='""'&&(f="");if(h.inside)if(f.length==0)f='"  "';else try{f='" '+JSON.parse(f)+' "'}catch(m){f='" "+\n'+f+'+\n" "'}return(forceXML?f.length>0:_.indexOf(self_close_tags,b)==-1)?i='"<'+b+e+'>"'+(f.length>0?" + \n"+f:"")+' + \n"</'+b+'>"':i='"<'+b+e+' />"',h.around&&(i='" '+i.substr(1,i.length-2)+' "'),i}},{name:"each loop",regexp:/^(\s*)(?::for|:each)\s+(?:([a-z_][a-z_\-]*),\s*)?([a-z_][a-z_\-]*)\s+in\s+(.*)(\s*)$/i,process:function(){var a=this.matches[2]||"__key__",b=this.matches[3],c=this.matches[4],d="__result__";return this.matches[5]&&this.contents.unshift(this.matches[5]),"(function () { var "+d+" = [], "+a+", "+b+"; "+"for ("+a+" in "+c+") { "+"if ("+c+".hasOwnProperty("+a+")) { "+b+" = "+c+"["+a+"]; "+d+".push(\n"+(this.render_contents()||"''")+"\n); "+"} } return "+d+'.join(""); }).call(this)'}},{name:"if",regexp:/^(\s*):if\s+(.*)\s*$/i,process:function(){var a=this.matches[2];return"(function () { if ("+a+") { "+"return (\n"+(this.render_contents()||"")+"\n);"+'} else { return ""; } }).call(this)'}},{name:"silent-comments",regexp:/^(\s*)-#\s*(.*)\s*$/i,process:function(){return'""'}},{name:"silent-comments",regexp:/^(\s*)\/\s*(.*)\s*$/i,process:function(){return this.contents.unshift(this.matches[2]),'"<!--'+this.contents.join("\\n")+'-->"'}},{name:"raw",regexp:/^(\s*)-\s*(.*)\s*$/i,process:function(){return this.contents.unshift(this.matches[2]),'"";'+this.contents.join("\n")+"; _$output = _$output "}},{name:"doctype",regexp:/^()!!!(?:\s*(.*))\s*$/,process:function(){var a="";switch((this.matches[2]||"").toLowerCase()){case"":a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';break;case"strict":case"1.0":a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';break;case"frameset":a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">';break;case"5":a="<!DOCTYPE html>";break;case"1.1":a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';break;case"basic":a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">';break;case"mobile":a='<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">';break;case"xml":a="<?xml version='1.0' encoding='utf-8' ?>";break;case"xml iso-8859-1":a="<?xml version='1.0' encoding='iso-8859-1' ?>"}return JSON.stringify(a+"\n")}},{name:"markdown",regexp:/^(\s*):markdown\s*$/i,process:function(){return parse_interpol(exports.Markdown.encode(this.contents.join("\n")))}},{name:"script",regexp:/^(\s*):(?:java)?script\s*$/,process:function(){return parse_interpol('\n<script type="text/javascript">\n//<![CDATA[\n'+this.contents.join("\n")+"\n//]]>\n</script>\n")}},{name:"css",regexp:/^(\s*):css\s*$/,process:function(){return JSON.stringify('<style type="text/css">\n'+this.contents.join("\n")+"\n</style>")}}],Haml=function(a,b){typeof b!="object"&&(forceXML=b,b={});var c;b.customEscape?(c="",escaperName=b.customEscape):(c=html_escape.toString()+"\n",escaperName="html_escape"),escapeHtmlByDefault=b.escapeHtmlByDefault||b.escapeHTML||b.escape_html;var d=optimize(compile(a)),e="with(locals || {}) {\n  try {\n   var _$output="+d+";\n return _$output;"+"  } catch (e) {\n"+"    return \"\\n<pre class='error'>\" + "+escaperName+'(e.stack) + "</pre>\\n";\n'+"  }\n"+"}";return new Function("locals",c+e)},Haml.compile=compile,Haml.optimize=optimize,Haml.render=render,Haml.execute=execute,Haml.html_escape=html_escape})(),typeof module!="undefined"&&(module.exports=Haml),function(){window.JST=window.JST||{},window.JST.posterous_bar=Haml('.pbar_inner\n  %header.test\n    %ul{class: (Posterous.currentUser ? "pbar_logged_in" : "pbar_logged_out")}\n      - if (!Posterous.currentUser) {\n      %li.pbar_first\n        %a.pbar_join{href: "http://#{POSTEROUS_HOSTNAME}/register?jumpto=#{escape(window.location.href)}"} \n          %span Join \n      - } else if (!site.isAuthor()) {\n      %li.pbar_first\n        %a.pbar_reader{href: "http://#{POSTEROUS_HOSTNAME}/"} Reader\n      - }\n      - if (site.isAuthor()) {\n      %li.pbar_first\n        %a.pbar_post{href: "http://#{POSTEROUS_HOSTNAME}/posts/new/#{site.get(\'id\')}"} Post\n      - }\n      - if (!site.isMember()) {\n      %li\n        %a.pbar_login_form{href: \'#\'} Follow\n      - } else if (site.isMember() && !site.isAdmin()) {\n      %li.pbar_first\n        %a.pbar_unfollow{href: \'#\'} Unfollow\n      - }\n      - if (site.isAdmin()) {\n      %li\n        %a.pbar_manage{href: "http://#{POSTEROUS_HOSTNAME}/#spaces/#{site.get(\'hostname\')}/posts/edit"} Manage \n      - }\n      %li.pbar_last\n        %a.pbar_menu{href: "#", title: "Menu"} \n          %span Menu\n  .pbar_main\n    .pbar_body\n    %footer\n      %a.pbar_close{href: "#"} Close\n      - if (Posterous.currentUser) {\n      %a.pbar_user_action.pbar_logout{href: "http://#{POSTEROUS_HOSTNAME}/logout?jumpto=#{escape(window.location.href)}"} Log Out\n      - } else {\n      %a.pbar_user_action.pbar_login{href: "http://#{POSTEROUS_HOSTNAME}/login?jumpto=#{escape(window.location.href)}"} Log In\n      - }\n      %a.pbar_user_action.pbar_forgot{href: "http://#{POSTEROUS_HOSTNAME}/forgot_password"} Forgot Password?'),window.JST.posterous_bar_login_form=Haml('.pbar_menu_wrap\n  %h1 Sign Up or Log In to follow\n  .pbar_toggle\n    .pbar_active_track\n    %ul\n      %li\n        %a.sign_up{href: "#"} Sign Up\n      %li\n        %a.log_in{href: "#"} Log In\n%form.log_in_form.cf{action: "https://#{POSTEROUS_HOSTNAME}/login", method: "post"}\n  %input{type: "hidden", name: "jumpto", value: window.location.href}\n  %input{type: "hidden", name: "follow", value: site.get("id")}\n  %input{type: "hidden", name: "authenticity_token", value: window._posterousToken || window._token}\n  .pbar_inputs.cf\n    .auto_fade_input\n      %label{for: "pbar_login_email"} Email\n      %input{type: "email", name: "email", id: "pbar_login_email", autocorrect: "off", autocapitalize: "off", tabindex: "4"}\n    .auto_fade_input.password\n      %label{for: "pbar_login_password"} Password\n      %input{type: "password", name: "password", id: "pbar_login_password", tabindex: "5"}\n  %button{type: "submit", tabindex: "6"}\n    %span Log In!\n%form.sign_up_form.cf{action: "https://#{POSTEROUS_HOSTNAME}/register", autocomplete: "off", method: "post"}\n  %input{type: "hidden", name: "jumpto", value: window.location.href}\n  %input{type: "hidden", name: "follow", value: site.get("id")}\n  %input{type: "hidden", name: "authenticity_token", value: window._posterousToken || window._token}\n  .auto_fade_input.email\n    %label{for: "pbar_user_email"} Email\n    %input{type: "text", name: "user_email", id: "pbar_user_email"}\n  .pbar_inputs.cf\n    .auto_fade_input.first\n      %label{for: "pbar_user_toast"} Email\n      %input{type: "email", name: "toast", id: "pbar_user_toast", autocorrect: "off", autocapitalize: "off", tabindex: "1"}\n    .auto_fade_input.password\n      %label{for: "pbar_user_password"} Password\n      %input{type: "password", name: "user_passwd", id: "pbar_user_password", tabindex: "2"}\n  %button{type: "submit", tabindex: "3"}\n    %span Sign Up Now!'),window.JST.posterous_bar_menu=Haml('.pbar_menu_wrap\n  - if (!Posterous.currentUser) {\n  .pbar_intro\n    %h1 \n      %strong #{site.get("name")}&nbsp;\n      is made with:\n    %a.pbar_spaces_logo{href: "http://#{POSTEROUS_HOSTNAME}", title: "Posterous Spaces"} Posterous Spaces\n  - } else {\n  %h1 Hi, <strong>#{Posterous.currentUser.get("firstname") || Posterous.currentUser.get("nickname")}</strong>\n  - }\n  %ul.pbar_link_list\n    - if (Posterous.currentUser) {\n    %li.cf\n      %a.pbar_view_spaces{href: "http://#{POSTEROUS_HOSTNAME}/#spaces"} \n        .pbar_icon\n        .pbar_text View Your Spaces\n    - if (!site.isAuthor()) {\n    %li.cf\n      %a.pbar_open_reader{href: "http://#{POSTEROUS_HOSTNAME}/"}\n        .pbar_icon \n        .pbar_text Open Reader\n    - }\n    - }\n    %li.cf\n      %a.pbar_slideshow{href: "#!/slideshow"}\n        .pbar_icon\n        .pbar_text Play Slideshow'),window.JST.posterous_bar_notification=Haml(".pbar_menu_wrap\n  .pbar_intro\n    %h1= message\n  %ul.pbar_link_list\n    :if links != undefined\n      :each link in links\n        %li.cf\n          %a{class: link.htmlClass, href: link.href}\n            .pbar_icon\n            .pbar_text= link.text"),window.JST.posterous_bar_warning=Haml('.pbar_menu_wrap\n  .pbar_intro\n    %h1= message\n  %ul.pbar_button_list.cf\n    :each button in buttons\n      %li.cf\n        %a{class: "pbar_confirmation_button #{button.htmlClass}", href: button.href}\n          %span= button.text')}();