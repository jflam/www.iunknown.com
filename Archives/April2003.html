<!-- Published by Fog Creek Software CityDesk CQSXKDXJHSYDVISL/5193B323/329 -->


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>April 2003</title>
  <link rel="stylesheet" href="../iunknown.css"/>
  <script type="text/javascript" src="http://www.haloscan.com/load.php?user=jlam"></script>
  <script language="javascript">
    function HaloScan2( id ) {
      location.href='http://www.haloscan.com/comments.php?user=jlam&comment='+id;
    }
  </script>
</head>
<body>
  <a href="http://www.iunknown.com"><img src="../Images/iunknown.png" width="350" height="60" border="0"></a> 
  <table width="700px" border="0" cellspacing="10">
    <tr>
      <td width="76%" valign="top">
        <div class="entryTitle">April 2003</div>
        <div class="entryDate">2003-04-18</div>
        <p>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>IUnknown.com - April 2003 Weblog Archives</title>
<link rel="stylesheet" href="../iunknown.css">
<script type="text/javascript" src="http://www.haloscan.com/load.php?user=jlam"></script>
<script language="javascript">
  function HaloScan2(id) { 
    location.href='http://www.haloscan.com/comments.php?user=jlam&comment='+id;
  }
</script>
</head>
<BODY>
  <a href="http://www.iunknown.com"><img src="../Images/iunknown.png" width="350" height="60" border="0"></a> 
  <table width="700px" border="0" cellspacing="10">
    <tr>
      <td width="76%" valign="top">
        <p><span class="entryTitle">April 2003 Archives</span></p>
         
          <div class="entryTitle">Confewzed</div>
          <div class="entryDate">2003-04-30</div>
          <p><SPAN>
<CENTER><IMG height=432 alt=[Image] hspace=4 src="../Images/confused_kobe_smaller.jpg" width=640 border=0 cd:pos="0"><BR clear=all></CENTER></SPAN>
<P>Hawhoa! Canwou pleeze helpme? I am sooo confewzed! I tink myname is Kobe. But mypeeple somedimez callme "Goooddawg" or "MisderBear". Udderpeeple somedimez callme "OoohWhaddaCutePuppie"&nbsp;or "HalloooooPuppie"! Why do peeple callme all dese diffwent namez? </P>
<P>Dis picture waz taken longtime ago. Iam much bigger dan dis now. MyDaddy&nbsp;will post more picturz ofme lader!</P></p>
          <p><a href="../Weblog/Confused.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Confewzed" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Confused.html');"><script type="text/javascript">postCount('Weblog/Confused.html');</script></a></p>
         
          <div class="entryTitle">Keep it coming!</div>
          <div class="entryDate">2003-04-29</div>
          <p><P>Thanks to everyone who has sent in their stories on code generation. Some folks wrote veritable essays on the topic. It seems like my request for stories has really struck an undercurrent of interest in code generation. The response has been fantastic! </P>
<P>I promise that I'm going to answer each and every one of you. But since I'd really like to say something insightful in each case, it might take a few days before I get through all of the emails. But don't let my email queue dissuade you from sending in your code generation story :)</P></p>
          <p><a href="../Weblog/Keepitcoming.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Keep it coming!" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Keepitcoming.html');"><script type="text/javascript">postCount('Weblog/Keepitcoming.html');</script></a></p>
         
          <div class="entryTitle">Dave Thomas on Code Generation</div>
          <div class="entryDate">2003-04-28</div>
          <p><P><A href="http://www.pragprog.com/pragdave">Dave Thomas</A>, of <A href="http://www.pragmaticprogrammer.com/">Pragmatic Programmer</A> fame, has some thoughts on code generation in <A href="http://www.codegeneration.net/tiki-read_article.php?articleId=9">this interview</A> on the&nbsp;<A href="http://www.codegeneration.net/tiki-index.php">Code Generation Network</A> (CGN). I didn't know that CGN existed until I found a single referrer in my server logs tonight.</P>
<P>IMHO, these are the&nbsp;highlights of the interview:</P>
<UL>
<LI>Justifying code generation using his Don't Repeat Yourself (DRY) principle that I first read about his book.</LI>
<LI>Highlighting the "bad smell" that taints code generation because of one-shot wizards</LI>
<LI>How code generation is just another tool in your toolbox - do not attempt to generate 100% of your app</LI></UL>
<P>Excellent interview and well worth the read.</P></p>
          <p><a href="../Weblog/DaveThomasonCodeGeneratio.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Dave Thomas on Code Generation" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/DaveThomasonCodeGeneratio.html');"><script type="text/javascript">postCount('Weblog/DaveThomasonCodeGeneratio.html');</script></a></p>
         
          <div class="entryTitle">Cross-technology abstractions</div>
          <div class="entryDate">2003-04-26</div>
          <p><P>Many applications contain abstractions that span a technology boundary. The most common case is the data access layer, where part of your abstraction is implemented in a general-purpose programming language, and part of your abstraction is implemented in SQL. This has led to the development of many code generation tools that target this particular problem: defining your object-relational mapping layer in one place, and generating the code and SQL that is required by your application.</P>
<P>However, this is not the only place where you will find these types of cross-technology boundary abstractions. For example, consider </P>
<UL>
<LI>user interface: mapping user interface definition(s) to a database or application schema 
<LI>remoting: mapping the remotable interface of an application to its internal API 
<LI>configuration: mapping configuration information (registry, XML, directory service) to its internal API 
<LI>security: mapping operating system / runtime security model to application services</LI></UL>
<P>Since these mappings are virtually guaranteed to evolve over the lifetime of your application, capturing their definitions in a single place lets you <EM>efficiently evolve</EM> your application. However, it is not just important to capture their definitions in a single place, it is important to capture <EM>how</EM> those abstractions are implemented; you need fine-grained control over what code gets generated.</P>
<P>These two elements: capturing abstractions in a single place, and fine-grained control over the generated code are the keys to code generation. My mid-term goal is to catalog and document code generation patterns that arise in different problem domains. The patterns will be documented on this web site, an accompanying newsletter in the near future, and a book once there is a compelling story. If you are actively working in code generation in your existing applications, <A href="mailto:jlam@iunknown.com">I'd love to hear from you</A>. I am really interested in hearing about the problems you have run into, and how they fit into my existing catalog of patterns. In return, I'm willing to share any unpublished patterns that might you solve your problem.</P>
<P>If you are in the process of updating an existing application, or are building a new application from scratch, you have an ideal opportunity to introduce code generation into your development organization. I can help make this process considerably less painful for you by helping to sell the concept to management and your development staff. The code generation patterns that I have captured can help you bootstrap the process and reduce the amount of friction that you'll encounter in the early on. Feel free to contact me at: <A href="mailto:jlam@iunknown.com">jlam@iunknown.com</A>.</P></p>
          <p><a href="../Weblog/Cross-technologyabstracti.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Cross-technology abstractions" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Cross-technologyabstracti.html');"><script type="text/javascript">postCount('Weblog/Cross-technologyabstracti.html');</script></a></p>
         
          <div class="entryTitle">Puppy advice</div>
          <div class="entryDate">2003-04-26</div>
          <p><P>Kobe has grown like a weed over the past 7 weeks. When we got him, he weighed in at a svelte 17 pounds. Today, he's a 35 pound brute and growing like a weed!</P>
<P>We spent a lot of time reading various bits of puppy advice, both in books and on the web. Here's a few things that we learned about taking care of new puppies that we didn't find written down:</P>
<UL>
<LI>Books give conflicting advice. Often. You need to experiment to find out what works best for your dog. You need to devise experiment(s) to rule out options. For example, we found that you need to measure the amount of water that you give Kobe. Initially we restricted the amount and when water was given to him. He did fine during this phase. Next, thinking that he could self-regulate his water, we put down measured amounts of water three times a day. He did fine here as well. Finally, we decided to leave down unregulated amounts of water. One afternoon he decided to gorge on water (with the predictable consequences on our kitchen floor :) We switched back to measured quantities left out for him to drink when he wants to, and everything's working out great.
<LI>Puppy diarrhea is <EM>really</EM> gross. Especially when he does it on carpet that is just one foot away from a large expanse of tile! We found that fasting him for 24 hours followed by 24 hours on a rice diet worked nicely to clear it up. However, Kobe wouldn't eat just plain rice; we fed him initially a rice / apple mixture and then a rice / chicken mixture. 
<LI>Puppies sleep <EM>a lot</EM>. If we're around and bothering him, he'll stay awake. Otherwise he just crashes out. 
<LI>Raising a puppy in an apartment is both good and bad. It's really good if you have a cute dog since everyone in the building will want to stop and say hi to him. This socializes the dog in a hurry, since he has met almost every shape, size and color of humans. The downside of raising a puppy in an apartment is the process involved in going outside. It takes nearly 5 minutes to get him to his "potty spot". This means that you'll need to carry him in the beginning, and you may be in for a few accidents along the way to his potty spot before he gets it. It took Kobe almost 5 weeks to go reliably to his potty spot. 
<LI>Older dogs generally don't want to have anything to do with energetic puppies. The oldest dog that I've seen Kobe play with is a 3 year old standard Poodle named Chanel who still thinks that she's a puppy. The rest of the dogs that Kobe regularly plays with are 2 years of age or younger. His best friend is Bailey, a 7 month old Golden Retriever; those two can go at it literally for hours on end, resulting in one very tired (and very good) puppy! 
<LI>The "terrible twos" aren't really all that terrible. I've seen Kobe give me a vacant look when I tell him to sit, and then he proceeds to sit about 20 seconds later; but that happens pretty rarely. 
<LI>Not all puppies want to chew through wiring. So far (thankfully) Kobe has shown little interest in wires. He does, however, have a taste for baseboards and door trim. With a bit of vigilence and bitter apple spray, we were able to change this bit of destructive behavior. 
<LI>Playing tug-of-war is not a bad game at all. You just need to define the parameters, and it's a great way of teaching the "give" command. 
<LI>Puppy school is a great place to go to reinforce commands under tremendous distraction. It was also a great way for him to meet puppies his own age. It took a while for Kobe to learn how to play with smaller dogs, since he so rarely encountered them during his daily travels. 
<LI>Kobe's a really picky eater. We were trying to switch him to another brand of dog food, and when we got to a 60/40 mix of old/new, he would actually pick out all of the old dog food and leave just the new dog food in his bowl! 
<LI>Not all rawhide is made the same. The stuff that we bought at Costco was infinitely better than the stuff that we got from a local pet shop. And it was cheaper too!</LI></UL>
<P>All in all, he's a great dog. He doesn't have an aggressive bone in his body, and he absolutely loves to meet other dogs and other people. He's still a little bit nippy at times, but that is getting better as well.</P></p>
          <p><a href="../Weblog/Puppyadvice.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Puppy advice" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Puppyadvice.html');"><script type="text/javascript">postCount('Weblog/Puppyadvice.html');</script></a></p>
         
          <div class="entryTitle">Code generation with GSLgen: Step 0</div>
          <div class="entryDate">2003-04-26</div>
          <p><P>As <A href="../Weblog/Codegenerationobservation.html">promised earlier</A>, this is the first in my series of articles on how to use GSLgen as a code generator.</P>
<P>Before you can do any code generation with GSLgen, you first have to download, compile and setup your environment variables. Currently, the latest version of GSLgen is 3.1, and it is packaged along with a number of other open-source tools from <A href="http://www.imatix.com">iMatix</A> in a source code only distribution called <A href="http://www.imatix.com/downloads.htm">RealiBase 1.0</A>. The cool thing about RealiBase is that the bits can be compiled and run on both Windows and Linux.</P>
<P>The RealiBase makefile assumes that you have MSVC 6.0 installed on your computer. Dismayed by the blizzard of build time errors when I tried to compile using VS.NET 2003, I simply installed MSVC 6.0 and compiled the sources from a MSVC 6.0 command prompt window. Andy Hopper, having a higher&nbsp;pain tolerance than me,&nbsp;messed around with the build under VS.NET 2002 and got it to build by copying the required libraries from the Platform SDK into the Microsoft Visual Studio .NET\Vc7\lib folder: </P>
<P><CODE>uuid.lib <BR>mpr.lib <BR>winmm.lib <BR>wsock32.lib <BR>odbc32.lib <BR>shell32.lib <BR>netapi32.lib <BR>advapi32.lib <BR>comdlg32.lib <BR>gdi32.lib <BR>user32.lib </CODE></P>
<P>Once you have the bits built, you need to place gsl.exe on your system path (the build script compiles GSLgen/3.1 into \imatix\bin\gsl.exe), and you're off to the races.</P>
<P>GSLgen expects two different files as its input. The first file is the file that contains the GSLgen code generation script. The second file is the file that contains your custom language, which must be implemented using XML.</P>
<P>What follows is arguably the simplest possible GSLgen code generation script. It lives in a file called helloworld.gsl, and is simply a C# Hello World application that writes the application name to the system console.</P><CODE>
<P>.define ignorecase=0<BR>using System;</P>
<P>public class App<BR>{<BR>&nbsp; public static void Main()<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; Console.WriteLine( "Hello, $(app.name)" );<BR>&nbsp; }<BR>}</P></CODE>
<P>We define the application name in an XML custom language file (helloworld.xml) that is used as input to this GSL script is:</P>
<P><CODE>&lt;app name="John"/&gt;</CODE></P>
<P>If you run the GSLgen interpreter from the command prompt using:</P>
<P><CODE>&gt;gsl -script:helloworld.gsl helloworld.xml</CODE></P>
<P>you should get the following as output:</P><CODE>
<P>using System;</P>
<P>public class App<BR>{<BR>&nbsp; public static void Main()<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; Console.WriteLine( "Hello, John" );<BR>&nbsp; }<BR>}</P></CODE>
<P>Next, let's examine the GSL script. The first line of your script instructs GSLgen to be case-sensitive (which is what you want most, if not all of the time). The rest of the script, with one notable exception, is simply literal text that gets copied to the output. </P>
<P>The $(app.name) construct tells the GSLgen interpreter to evaluate the expression contained within the parentheses and copy the result to standard output. This is what generates "John" in the output . In this case, our expression means "the name attribute of the app element".[1] </P>
<P>The thing that really appeals to me is GSLgen's strength as a templating language. As you can see, the syntax of the GSL script is very clean and uncluttered (contrast this with XSLT!). There is a minimum amount of syntax that gets in the way of seeing what is template and what is code.</P>
<P>I'd like to close off this entry by providing you with a couple of tips. First, you can initialize global variables from the command line. The ignorecase variable that we defined earlier in the GSL script is a variable that can be initialized using the following command line:</P>
<P><CODE>&gt;gsl -ignorecase:0 -script:helloworld.gsl helloworld.xml</CODE></P>
<P>Another option that you might want to consider (but that I wouldn't necessarily recommend) is the fact that you can have an XML file associated with a GSL file by adding a script attribute to the document element of your XML file. For example, you can get a simpler command line:</P>
<P><CODE>&gt;gsl -ignorecase:0 helloworld.xml</CODE></P>
<P>By changing your XML file to:</P>
<P><CODE>&lt;app script="helloworld.gsl" name="John"/&gt;</CODE></P>
<P>This is somewhat similar to the way XSLT works via the &lt;?xml-stylesheet .../&gt; pseudo-element.</P>
<P>There are two drawbacks to using this embedding. The first is that your XML file is usually used as input to more than one GSLgen script. The second (and this is the reason I'm bringing this up at all) is that the GSLgen XML parser doesn't understand namespaces.</P>
<P>Ideally, I would have implemented this feature using an attribute that would have been scoped to the GSLgen namespace:</P>
<P><CODE>&lt;app xmlns:gsl="http://www.imatix.com/gsl/31"&nbsp;gsl:script="helloworld.gsl" name="John"/&gt;</CODE></P>
<P>but this simply isn't possible using the current version of GSLgen. </P>
<P>So that's Hello, World using GSLgen. Hopefully this whets your appetite to try out this tool. Hopefully folks currently using&nbsp;XSLT to do their code generation will be encouraged by the&nbsp;more straightforward of this tool.&nbsp;In the next installment in this series, I'll examine the notion of context in GSLgen and how it can be exploited in loops.</P>
<P>[1] You might be tempted to think that you can arbitrarily nest these expressions a'la XPath. Unfortunately, you cannot, and you will quickly find out that your expressions are really limited to (element name.attribute name). Note that these expressions are always evaluated relative to your current <EM>context; </EM>I will discuss GSL contexts in a future article.</P></p>
          <p><a href="../Weblog/CodegenerationwithGSLgenS.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Code generation with GSLgen: Step 0" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/CodegenerationwithGSLgenS.html');"><script type="text/javascript">postCount('Weblog/CodegenerationwithGSLgenS.html');</script></a></p>
         
          <div class="entryTitle">Beating the code generation drum</div>
          <div class="entryDate">2003-04-24</div>
          <p><P>Here's <A href="../Files/code_generation.ppt">the slide deck</A> that I'm going to be using for a series of code generation talks that I'll be giving at various user groups and conferences. Note that this slide deck is a current snapshot of my ideas and will likely change significantly between talks. I'll post links to updates to the deck separately.</P>
<P>If you're going to be in Toronto, I'm speaking at two different local user group meetings on code generation:</P>
<OL><A href="http://www.tvbug.com">
<LI>Toronto Visual Basic Users Group, April 24 (yes, that's tonight).</LI>
<LI></A><A href="http://www.dnugtor.com/community/default.aspx">Toronto .NET Users Group, tentatively June 18</A></LI></OL>
<P>If you're going to be in New Orleans or Boston, I'll be talking about code generation at both WinDev and VSConnections.</P>
<OL><A href="http://www.vsconnections.com/vs/">
<LI>VSConnections, New Orleans, May 6-9</LI>
<LI></A><A href="http://butrain.com/windev/">Win-Dev, Boston, June 16-20</A></LI></OL></p>
          <p><a href="../Weblog/Beatingthecodegenerationd.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Beating the code generation drum" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Beatingthecodegenerationd.html');"><script type="text/javascript">postCount('Weblog/Beatingthecodegenerationd.html');</script></a></p>
         
          <div class="entryTitle">Code generation observations</div>
          <div class="entryDate">2003-04-18</div>
          <p><P>I'd like to comment on a few of <A href="../Weblog/Codegenerationcommentsfro.html">Pieter Hintjen's comments</A> in this entry:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P align=left>"This is not a freedom that many people can use. It's the white paper <BR>problem. You may be free to draw anything you like, but it only works <BR>if you're a capable artist. So much easier to color by numbers! <BR>Good abstractions take many years to develop and refine. Sure: interfaces, <BR>test cases, SQL... these are trivial. But how about an abstraction for a<BR>mobile phone interface that will generate the tens of thousands of lines of <BR>code that implement it? "</P></BLOCKQUOTE>
<P dir=ltr align=left>This one paragraph is incredibly insightful; I love the paint-by-numbers analogy! It also captures the essence of embarking on a large development project with code-generation as the core technique.</P>
<P dir=ltr align=left>In the beginning, you need to be able to walk before you can run. Code generation is such a foreign technique to most people that they really need to wrap their minds around a concrete example before they can proceed to the next level. This is where the low hanging fruit really comes in really handy.</P>
<P dir=ltr align=left>In multi-tier applications, the most obvious place to apply code generation is by automating the creation of the object/relational mapping code (often called the data access layer). This is tedious and error-prone code to write, and has spawned <A href="http://www.google.com/search?hl=en&amp;ie=UTF-8&amp;oe=UTF-8&amp;q=code+generation+data+access+layer">a large number of code generation articles and products</A> that purport to solve this specific problem.</P>
<P dir=ltr align=left>Solving this problem typically involves:</P>
<UL dir=ltr>
<LI>
<DIV align=left>Generating the database schema</DIV>
<LI>
<DIV align=left>Generating the stored procedures to access the database entities</DIV>
<LI>
<DIV align=left>Generating the proxy code that calls the stored procedures</DIV>
<LI>
<DIV align=left>Generating the code that persists entity objects to the database </DIV>
<LI>
<DIV align=left>Generating the code that manages logical and physical relationships between entities</DIV>
<LI>
<DIV align=left>Generating the entity classes</DIV></LI></UL>
<P align=left>Of these, generating the schema and the entity classes are the most straighforward operations. Next in line are generating the stored procedures and the proxy code that calls them. You are really <EM>forced</EM> to think abstractly when generating the code that manages the logical relationships between entities as defined by your schema. These are the classic 1:1, 1:many and many:many relationships (among others). When you implement these, you will find patterns that naturally arise from your schema, and code generation lets you capture these patterns in your application.</P>
<P align=left>One book that I have found that really captures the essence of many of the patterns behind the logical relationships in your database schema is <A href="http://www.martinfowler.com">Martin Fowler's</A> <A href="http://www.amazon.com/exec/obidos/ASIN/0321127420/iunknowncom-20/">Patterns of Enterprise Application Architecture</A>. It doesn't take much of a stretch to capture Fowler's patterns using code generation (in fact he obliquely refers to implementations via code generation in the text that describes several of the patterns in his book). Once these patterns have been captured in your schema + code generator, they become building blocks for more complex abstractions that are specific to your application.</P>
<P align=left>Using a tool like GSLgen requires that you capture the semantics of your entities and their relationships within a "little language". GSLgen requires that this little language be described using XML, as this gets around the non-trivial problem of writing a parser for an arbitrary&nbsp;context-free grammar. Next, you write your code generator using GSLgen scripting language which provides native support for maniplating XML within the context of the scripting language. Finally you write a program using your mini-language, compile it using GSLgen and your code-generation script to create source code in your favorite programming language.</P>
<P align=left>Effective use of GSLgen requires that you not view it as a "wizard". That is, the code that it generates is not intended to be a one-shot deal. You version control the program(s) written in your mini-language and the GSLgen script(s). You NEVER version-control the generated code, and you NEVER modify the generated code.</P>
<P align=left>However, generating the data access layer is just the first step, as it is largely plumbing code. The interesting parts of your application appear when you have to implement the business logic that manipulates the data access layer. This is where code generation can help, but this is also the area where the going gets tough. I'm sure that this is what Pieter meant when he said that "Good abstractions take many years to develop and refine".</P>
<P align=left>Using code generation to build your application abstractions requires a very thorough understanding of the problem domain. You need to analyze the patterns that recur in your application and build abstractions on top of those patterns. One approach that I've found to be very helpful is to think in terms of workflows or tasks. This lets you find the recurring patterns, and capture the variations within a pattern within your "little language" and your code generator. I suspect that there are interesting patterns that will recur in various application domains, and it is my goal to research and catalog these patterns over the next few years. With an approachable pattern and reasonable examples, I suspect it will make code generation much more approachable as a technique for solving application problems.</P>
<P align=left>But wait you say, can't <A href="http://www.joelonsoftware.com/articles/LeakyAbstractions.html">your abstractions leak</A>? Absolutely! And I would argue that&nbsp;they <EM>should leak</EM>. One important caveat to always remember is the risk of building an abstraction that is too complex; I can virtually guarantee that an all-encompassing abstraction that builds 100% of your code will also be so complex that it is unapproachable and unmaintainable. Instead strive to keep your abstraction as simple as possible, generating the majority of your code but then delegating to your implementation language those exceptional / arbitrary / boundary cases that are so difficult to capture using your abstraction.</P>
<P align=left>The best way of seeing how code generation works is by example. To help folks get started, I'll be posting a series of entries starting next week that walk through code generating a simple, yet highly generalizable application using GSLgen.</P></p>
          <p><a href="../Weblog/Codegenerationobservation.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Code generation observations" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Codegenerationobservation.html');"><script type="text/javascript">postCount('Weblog/Codegenerationobservation.html');</script></a></p>
         
          <div class="entryTitle">Code generation comments from Pieter Hintjens</div>
          <div class="entryDate">2003-04-18</div>
          <p><P>Pieter Hintjens is one of the creators of <A href="../Weblog/GSLgenupdated.html">GSLgen</A>. Recently, Pieter left a very insightful comment under my <A href="../Weblog/Whenlessismore.html">code generation epiphany piece</A> that I'd like to replicate here on my weblog where more folks are likely to read it:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P>John, your insights into the why of code generation are excellent. It took me <BR>a long time to come to the same conclusion, that the power came from <BR>abstraction and not reuse. By the way, let me introduce myself: I'm one <BR>of the authors of GSLgen, along with my long-time friend Jonathan Schultz. </P>
<P>The surprise with GSLgen is not that it works powerfully (it was very <BR>carefully designed to be powerful). The surprise is that people are <BR>surprised by it. </P>
<P>I wrote an article for DDJ in 1999 about GSLgen and code generation. <BR>Now, I've written a couple of articles for this magazine, and I know the <BR>editor, yet they found that code generation was so obscure and such a <BR>bizarre idea that they did not publish the article. </P>
<P>And yet, how else can you abstract your ideas up from the banal level of <BR>writing code line by painful line? </P>
<P>I began writing code generators with Leif Svalgaard in 1985, in COBOL, <BR>part of a huge toolkit that generated portable COBOL applications for <BR>mainframes, minis, PCs. Our first code generators were very specific: <BR>generate database code, generate forms, whatever. You can still see <BR>echoes of this in my Libero tool (www.imatix.com) which generates code <BR>for state machines. State machines are a very powerful abstraction, much <BR>loved by telecoms programmers, and Libero (which DDJ did print an <BR>article on) has been widely used since it was released in 1992 or so. </P>
<P>GSLgen does everything Libero does, but for an infinitely wider set of <BR>abstractions. While Libero says: "here, we've developed this nice <BR>abstraction, and here is a code generator that implements it", GSLgen <BR>says "here is a way of defining and implementing arbitrary <BR>abstractions." </P>
<P>This is not a freedom that many people can use. It's the white paper <BR>problem. You may be free to draw anything you like, but it only works <BR>if you're a capable artist. So much easier to color by numbers! <BR>Good abstractions take many years to develop and refine. Sure: interfaces, <BR>test cases, SQL... these are trivial. But how about an abstraction for a<BR>mobile phone interface that will generate the tens of thousands of lines of <BR>code that implement it? </P>
<P>The combination of XML plus 'simple scripting language' is very potent. <BR>When that scripting language is intended for human use (not like XSLT <BR>which is potently awful to use), and aims at code generation (doing <BR>small but valuable data manglings), you get a tool like GSLgen. </P>
<P>Our company - iMatix - does just about everything through GSLgen. We <BR>simply don't write code by hand any more, unless it's GSL scripts, or <BR>XML abstractions. What does this give us? It's hard to compare <BR>efficiency because so much depends on the actual value of the resulting <BR>applications, but we can build complex applications for about 10% of the <BR>cost of other teams. That's a 90% saving... and about half of the <BR>remaining cost is in things like testing and building that we don't yet <BR>automate enough. GSLs produces near perfect code, at about 1/10th the <BR>cost of writing code by hand, and it's code that costs almost nothing to <BR>maintain. This gives you some idea of how we're breaking the rules of <BR>traditional software engineering. <BR><BR>Since GSL/2 was released, we've continued pushing the language towards <BR>something more like a modern OOP scripting language. The first GSL syntax <BR>was truly minimalistic: just enough to work through the XML tree and <BR>produce output under various conditions. When we made GSL/1 in 1996, <BR>we'd been developing this 'minimalistic' language for about ten years. <BR>Again, if you know any of the iMatix tools, you'll see echoes of it in <BR>Libero and Htmlpp. Designing a language that mixes well with code is <BR>a prerequisite for template-based code generation. <BR><BR>It's not really necessary to be able to (e.g.) access databases in a <BR>code generator, but when you get used to playing with XML abstractions, <BR>you start to thing: "why not build a web server in GSL... and handle the <BR>configuration file as an abstraction...?" All it needs is socket i/o. Check. <BR>Process control. Check. Multithreading. Check. Since GSL/3, the GSLgen <BR>engine has been a multithreaded affair built using our SMT kernel. We have <BR>this habit at iMatix of making bizarrely useful things (like Xitami). And most of <BR>this technology is now going into GSLgen. <BR><BR>As far as we know, GSLgen is a unique thing in the software world: <BR>not so much a code generator as a way of making arbitrary code <BR>generators. As John Lam said, it takes a stubborn mind to make that <BR>worth something. But in this industry we're faced with a fundamental <BR>problem. We keep changing the languages we use, thinking that if only we <BR>can move from C++ to Java, from VB to C#, all our problems will go away. <BR>What we forget is that each move means rewriting years of work. Throw it <BR>all out, start again. It's a sad waste of our lives. With code <BR>generation, you can escape this cycle. Abstractions are immortal. <BR>Abstractions can live forever. Not five years, ten years, but as long <BR>as there is software running on computers. This is why Libero is still <BR>popular and highly useful more than a decade after I wrote it. Migrating <BR>your code generators to a new language is often a matter of a few days <BR>or weeks only. If you do it right (ah, grasshopper, try again) you will <BR>find yourself floating above the language wars. 
<P>It takes a stubborn mind to think of todays' work in terms of tomorrow. <BR>But it's worth it, and for professional programmers who value their time, <BR>it seems to be one of the few avenues open.</P></BLOCKQUOTE></p>
          <p><a href="../Weblog/Codegenerationcommentsfro.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Code generation comments from Pieter Hintjens" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Codegenerationcommentsfro.html');"><script type="text/javascript">postCount('Weblog/Codegenerationcommentsfro.html');</script></a></p>
         
          <div class="entryTitle">GSLgen updated!</div>
          <div class="entryDate">2003-04-18</div>
          <p><P>Readers of this weblog know that I'm a big fan of GSLgen, which is by far the best <A href="../Weblog/Whenlessismore.html">code generation</A> tool that I've come across. The good news is that GSLgen has been updated to V3.1. It's not available as a standalone product, however. Instead, it's integrated into a <A href="http://www.imatix.com/downloads.htm">suite of open source tools called RealiBase</A>. You'll need to download the source and compile using VC++ 6.0.[1] </P>
<P>There's a bit of bad news as well. GSLgen/2 was released under <A href="../Files/gslgen_license.txt">a very liberal license</A> that let you do essentially whatever you wanted with it. GSLgen/3.1, however, is released under GPL for open source projects and under the "iMatix commercial license" for commercial work. I'm still in the process of trying to find out what the cost of an iMatix commercial license is, since we would very much like to use some of the new features in GSLgen/3.1 (most notably the ability to return values from functions) in our code generation scripts.</P>
<P>[1]&nbsp;I tried for a few minutes to get it to build using VS 7.1 and the latest Platform SDK; I suspect that you'll do what I did and give up and simply install VS 6.0. I'm AMAZED at how quickly VS 6.0 installs on a modern computer :)</P></p>
          <p><a href="../Weblog/GSLgenupdated.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to GSLgen updated!" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/GSLgenupdated.html');"><script type="text/javascript">postCount('Weblog/GSLgenupdated.html');</script></a></p>
         
          <div class="entryTitle">Hello ... is this thing on?</div>
          <div class="entryDate">2003-04-18</div>
          <p><CODE>
<P>&gt;nunit-console /assembly:brain_tests.dll</P>
<P>NUnit version 2.0.6<BR>Copyright (C) 2002 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov. <BR>Copyright (C) 2000-2002 Philip Craig.<BR>All Rights Reserved.<BR>.F</P>
<P>Tests run: 1, Failures: 1, Not run: 0, Time: 0.2904176 seconds</P>
<P>Failures:<BR>1) Tests.ManageWeblog.Update : Brain not available<BR>&nbsp;&nbsp;&nbsp; at Tests.ManageWeblog.Update in c:\brain</P></CODE></p>
          <p><a href="../Weblog/Hello...isthisthingon.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Hello ... is this thing on?" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/Hello...isthisthingon.html');"><script type="text/javascript">postCount('Weblog/Hello...isthisthingon.html');</script></a></p>
         
          <div class="entryTitle">Microsoft acquires Linux</div>
          <div class="entryDate">2003-04-01</div>
          <p>From the <A href="http://www.tomshardware.com/column/20030401/index.html">I really need to start blogging again department</A> :)</p>
          <p><a href="../Weblog/MicrosoftacquiresLinux.html"><img src="../Images/blue_button.jpg" border="0" title="Permanent link to Microsoft acquires Linux" alt="Permanent Link" width="18" height="18" align="top"></a>&nbsp;&nbsp;<a href="javascript:HaloScan2('Weblog/MicrosoftacquiresLinux.html');"><script type="text/javascript">postCount('Weblog/MicrosoftacquiresLinux.html');</script></a></p>
        
      </td>
      <td width="24%" valign="top">
        <a href="http://www.iunknown.com/rss.xml"><img src="../Images/xml.png" width="36" height="14" border="0"></a>
  
        <p><img src="../Images/about.png" width="100" height="25"></p>
        <div class="aboutEntry"> 
          
            <A href="../About/Aboutme.html">About me</A><br>
          
            <A href="../About/fog0000000006.html">About this site</A><br>
          
            <A href="../About/fog0000000010.html">My plan</A><br>
          
            <A href="../About/fog0000000009.html">My other life</A><br>
          
            <A href="../About/fog0000000008.html">My products</A><br>
          
            <A href="../About/fog0000000013.html">My publications</A><br>
          
        </div>

        <p><img src="../Images/archives.png" width="100" height="25"></p>
        <div class="archiveEntry">
         
           <A href="April2003.html">April 2003</A><br>
         
           <A href="March2003.html">March 2003</A><br>
         
           <A href="February2003.html">February 2003</A><br>
         
           <A href="January2003.html">January 2003</A><br>
         
           <A href="December2002.html">December 2002</A><br>
         
           <A href="November2002.html">November 2002</A><br>
         
           <A href="October2002.html">October 2002</A><br>
         
           <A href="September2002.html">September 2002</A><br>
         
           <A href="August2002.html">August 2002</A><br>
         
           <A href="July2002.html">July 2002</A><br>
         
           <A href="June2002.html">June 2002</A><br>
         
           <A href="May2002.html">May 2002</A><br>
         
           <A href="April2002.html">April 2002</A><br>
         
           <A href="fog0000000116.html">March 2002</A><br>
         
           <A href="fog0000000091.html">February 2002</A><br>
         
           <A href="fog0000000046.html">January 2002</A><br>
         
           <A href="fog0000000030.html">December 2001</A><br>
         
        </div>

        <p><img src="../Images/articles.png" width="100" height="25"></p>
        <div class="articleEntry">
          
            - <A href="../Articles/Booksuggestions.html">Book suggestions</A><br>
          
            - <A href="../Articles/fog0000000082.html">Interface dispatch vs. object reference dispatch</A><br>
          
            - <A href="../Articles/fog0000000065.html">x86 Resources</A><br>
          
            - <A href="../Articles/fog0000000041.html">Entertainment PC's Part 2</A><br>
          
            - <A href="../Articles/fog0000000034.html">Entertainment PC's</A><br>
          
            - <A href="../Articles/fog0000000025.html">Hello CppUnit</A><br>
          
        </div>

        <p><img src="../Images/links.png" width="100" height="25"></p>
        <div class="linkEntry">
          <a href="http://www.gotdotnet.com/team/dbox/spoutlet.aspx">Don Box</a><br>
          <a href="http://www.stronglytyped.com/">Richard Caetano</a><br>
          <a href="http://www.razorsoft.net/weblog/">Peter Drayton</a><br>
          <a href="http://radio.weblogs.com/0109845/">Jeroen Frijters</a><br>
          <a href="http://radio.weblogs.com/0105852/">Sam Gentile</a><br>
          <a href="http://radio.weblogs.com/0106747/">Scott Hanselman</a><br>
          <a href="http://radio.weblogs.com/0104813/">Drew Marsh</a><br>
          <a href="http://www.dotnetremoting.cc/dotnetcentric/">Ingo Rammer</a><br>
          <a href="http://www.winterdom.com/weblog/">Tomas Restrepo</a><br>
          <a href="http://www.sellsbrothers.com/">Chris Sells</a><br>
          <a href="http://www.joelonsoftware.com/">Joel Spolsky</a><br>
          <a href="http://radio.weblogs.com/0108971/">Clemens Vasters</a><br>
          <a href="http://staff.develop.com/jasonw/weblog/">Jason Whittington</a><br>
          <a href="http://dotnetguy.techieswithcats.com/">Brad Wilson</a><br>
        </div>
      </td>
    </tr>
  </table>
</BODY>
</HTML><img src="../Images/blue_button.jpg" alt="Permanent Link" width="18" height="18" align="top"></p>
        <a href="javascript:HaloScan2('Archives/April2003.html');"><script type="text/javascript">postCount('Archives/April2003.html');</script></a>
      </td>
      <td width="24%" valign="top">
        <a href="http://www.iunknown.com/rss.xml"><img src="../Images/xml.png" width="36" height="14" border="0"></a>
  
        <p><img src="../Images/about.png" width="100" height="25"></p>
        <div class="aboutEntry"> 
          
            <A href="../About/Aboutme.html">About me</A><br>
          
            <A href="../About/fog0000000006.html">About this site</A><br>
          
            <A href="../About/fog0000000010.html">My plan</A><br>
          
            <A href="../About/fog0000000009.html">My other life</A><br>
          
            <A href="../About/fog0000000008.html">My products</A><br>
          
            <A href="../About/fog0000000013.html">My publications</A><br>
          
        </div>

        <p><img src="../Images/archives.png" width="100" height="25"></p>
        <div class="archiveEntry">
         
           <A href="April2003.html">April 2003</A><br>
         
           <A href="March2003.html">March 2003</A><br>
         
           <A href="February2003.html">February 2003</A><br>
         
           <A href="January2003.html">January 2003</A><br>
         
           <A href="December2002.html">December 2002</A><br>
         
           <A href="November2002.html">November 2002</A><br>
         
           <A href="October2002.html">October 2002</A><br>
         
           <A href="September2002.html">September 2002</A><br>
         
           <A href="August2002.html">August 2002</A><br>
         
           <A href="July2002.html">July 2002</A><br>
         
           <A href="June2002.html">June 2002</A><br>
         
           <A href="May2002.html">May 2002</A><br>
         
           <A href="April2002.html">April 2002</A><br>
         
           <A href="fog0000000116.html">March 2002</A><br>
         
           <A href="fog0000000091.html">February 2002</A><br>
         
           <A href="fog0000000046.html">January 2002</A><br>
         
           <A href="fog0000000030.html">December 2001</A><br>
         
        </div>

        <p><img src="../Images/articles.png" width="100" height="25"></p>
        <div class="articleEntry">
          
            - <A href="../Articles/Booksuggestions.html">Book suggestions</A><br>
          
            - <A href="../Articles/fog0000000082.html">Interface dispatch vs. object reference dispatch</A><br>
          
            - <A href="../Articles/fog0000000065.html">x86 Resources</A><br>
          
            - <A href="../Articles/fog0000000041.html">Entertainment PC's Part 2</A><br>
          
            - <A href="../Articles/fog0000000034.html">Entertainment PC's</A><br>
          
            - <A href="../Articles/fog0000000025.html">Hello CppUnit</A><br>
          
        </div>

        <p><img src="../Images/links.png" width="100" height="25"></p>
        <div class="linkEntry">
          <a href="http://www.gotdotnet.com/team/dbox/spoutlet.aspx">Don Box</a><br>
          <a href="http://www.stronglytyped.com/">Richard Caetano</a><br>
          <a href="http://www.razorsoft.net/weblog/">Peter Drayton</a><br>
          <a href="http://radio.weblogs.com/0109845/">Jeroen Frijters</a><br>
          <a href="http://radio.weblogs.com/0105852/">Sam Gentile</a><br>
          <a href="http://radio.weblogs.com/0106747/">Scott Hanselman</a><br>
          <a href="http://radio.weblogs.com/0104813/">Drew Marsh</a><br>
          <a href="http://www.dotnetremoting.cc/dotnetcentric/">Ingo Rammer</a><br>
          <a href="http://www.winterdom.com/weblog/">Tomas Restrepo</a><br>
          <a href="http://www.sellsbrothers.com/">Chris Sells</a><br>
          <a href="http://www.joelonsoftware.com/">Joel Spolsky</a><br>
          <a href="http://radio.weblogs.com/0108971/">Clemens Vasters</a><br>
          <a href="http://staff.develop.com/jasonw/weblog/">Jason Whittington</a><br>
          <a href="http://dotnetguy.techieswithcats.com/">Brad Wilson</a><br>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
