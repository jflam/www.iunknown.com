<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
      <meta http-equiv="X-UA-Compatible" content="chrome=1" />
      <meta name="width" content="500" />
      <meta name="generator" content="Posterous" />
      <script src="/javascripts/vendor/modernizr.custom.09241.js?1367517938" type="text/javascript"></script>
      <!--[if lt IE 9]>
        <script src="/javascripts/innershiv.js?1367517938" type="text/javascript"></script>
      <![endif]-->
      <link href="/bundles/posts.css" media="screen" rel="stylesheet" type="text/css" />
      <!--[if lt IE 9]>
        <link href="/bundles/ie.css" media="screen" rel="stylesheet" type="text/css" />
      <![endif]-->
      <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/LessIsBetter"/>
      <meta name="medium" content="blog" /><link rel="image_src" href="http://posterous.com/images/profile/missing-public-space-75.png" />
      <script type="text/javascript">
//<![CDATA[
window._token = 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='; beforeload = (new Date()).getTime(); pagetype = 'list';
//]]>
</script>
      <script src="/bundles/sites_initialization.js" type="text/javascript"></script>
      <script type="text/javascript">
//<![CDATA[
var $j = jQuery.noConflict();
//]]>
</script>
      <script type="text/javascript">
//<![CDATA[
var POSTEROUS_HOSTNAME = 'posterous.com'
//]]>
</script>
      <script data-posterous-deferred-content-url="http://iunknown.com/posts/deferred_content.jsonp" data-posts-data="%5B%7B%22post_id%22%3A36932913%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22converging-on-a-correct-design%22%7D%2C%7B%22post_id%22%3A36932909%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22generics-stabilizing%22%7D%2C%7B%22post_id%22%3A36932901%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22generics-in-rubyclr%22%7D%2C%7B%22post_id%22%3A36932900%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22ides-and-complexity%22%7D%2C%7B%22post_id%22%3A36932892%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22rubyclr-and-autodispose%22%7D%2C%7B%22post_id%22%3A36932886%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22interfaces-and-rubyclr%22%7D%2C%7B%22post_id%22%3A36932884%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22native-ruby-array-data-binding%22%7D%2C%7B%22post_id%22%3A36932881%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22rubyclr-is-all-about-choice%22%7D%2C%7B%22post_id%22%3A36932877%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22rubyclr-interfaces%22%7D%2C%7B%22post_id%22%3A36932874%2C%22user_id%22%3A931119%2C%22post_is_private%22%3Afalse%2C%22post_url_slug%22%3A%22google-calc%22%7D%5D" id="posterous_initialization_script" src="/javascripts/initialize.js?1367517938" type="text/javascript"></script>
      
    <script src="/bundles/tags.js" type="text/javascript"></script><link rel="canonical" href="http://iunknown.com?page=30" />
<link href="/themes/light-matter/post-style.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 8]>
	<link href="/themes/light-matter/ie-style.css" rel="stylesheet" type="text/css" />
<![endif]-->
<title>John Lam on Software - Home</title>
</head>
<body><div class="posterous_site_data" data-post-id="undefined" data-posterous-hostname="posterous.com" data-show-type="site" data-site-id="2278433" data-site-is-private="false" data-site-location="false" data-site-type="posterous" data-user-id="931119"></div><div class="posterous_ojs" data-posterous-admin-box="true"></div><div class="posterousPrivateBox">
	
	
</div>
      <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId  : '6694405826',
              status : true, // check login status
              cookie : true, // enable cookies to allow the server to access the session
              xfbml  : true, // parse XFBML
              oauth  : true

            });
            
          };

          (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = 'http://connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
          }());
        </script>
    
  <div id="pbar">
        				<noscript>
  <div id="posterousbar_nojs">
    <a href="http://posterous.com/"><img src="/images/header/yellow.png" alt="Posterous" /></a>
  </div>
</noscript>
              </div>
<div id="header-container">
	<div id="header">
		
		<h1 class="site-name"><a href="http://iunknown.com">John Lam on Software</a></h1>
		<p class="site-description"></p>
	</div>
</div>

                
	<div id="pages-container">
		<div id="pages">
            <ul>
            	
                
                    <li><a href="http://about.me/jlam" title="About me" class="">About me</a></li>
                
              
            </ul>
		</div>
	</div>

              
<div id="container">
	<ul class="post-list clearfix">
		
			<li class="post-item clearfix" id="post_36932913">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932913"><a href="http://iunknown.com/2006/03/converging-on-a-correct-design.html">Converging on a correct design</a></h3>
					
					
						<ul class="meta">
							<li class="date">3 Mar 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/03/converging-on-a-correct-design.html" id="comment_link_36932913">0 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932913"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932913">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932913">
	
	<li><a href="http://posterous.com/posts/edit/36932913">Edit</a></li>
  <li><a href="/posts/destroy/36932913" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932913/tags/edit_multiple" data-post-id="36932913" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932913" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932913">
					<div class="copy">
						<p>Special cases in code that are workarounds for a seemingly innocuous problem are almost always a symptom of something wrong in your design.</p>
<p>Here&rsquo;s an example from some work that I&rsquo;ve been doing for the past couple of days: identifying layering violations in <a href="http://www.iunknown.com/articles/2006/02/20/second-drop-of-rubyclr">RubyCLR</a>. This work led me to look at how I was caching <code>Type</code> objects in the bridge.</p>
<p>I currently hold onto a reference to a <span class="caps">CLR</span> <code>Type</code> object in each Ruby shadow class object that I create. So you could think of the Ruby type system as a cache for all <code>Type</code> objects that are currently in use by your program.</p>
<p>The problem is this: I cache <code>Type</code> objects elsewhere as well, particularly in the lower levels of the bridge that use my <a href="http://www.iunknown.com/articles/2005/12/13/third-drop-of-rbdynamicmethod">RbDynamicMethod</a> library. Now, it just doesn&rsquo;t <em>feel</em> right to have duplicate caches, so I set about redesigning my Reflection engine to use a unified cache.</p>
<p>While looking at the C++ code that I had to refactor, I decided to postpone this work to work on something more important: leveraging inheritance in my Ruby shadow class objects. Right now, if you had a <code>System.Windows.Forms.TextBox</code> and a <code>System.Windows.Forms.Button</code> you will have duplicate accessor <code>Name</code> accessor methods; my shadow classes were completely ignorant of inheritance in the <span class="caps">CLR</span> class libraries. The correct solution is to attach the <code>Name</code> accessor method shim to the class where it was defined: the common <code>System.Windows.Forms.Control</code> class.</p>
<p>Postponing the work seemed like the right thing &ndash; after all, I was just being inefficient, right?</p>
<p>So I started to implement ruby shadow class inheritance. But then I ran smack into a what was now a clear layering violation: the reference to the <code>Type</code> object that I was holding in my shadow class objects. There was even (surprise!) some special case code to treat <code>Type</code> objects differently.</p>
<p>I need to move that reference out of the Ruby shadow class object and into the unified <code>Type</code> cache that I wanted to implement earlier, but postponed!</p>
<p>So the moral of the story is this: several seemingly unrelated problems were all symptoms of the same incorrect design. I&rsquo;m continually amazed at how refactoring code almost always leads me to a (more) correct design.</p>
<p>As an aside, this is also why programming languages that let you write fewer lines of code are almost always superior: it&rsquo;s just easier to <em>see</em> the incorrect design when you&rsquo;re staring at fewer lines of code to begin with. And they also have the side-effect of making it much easier to do complex refactoring because there&rsquo;s less language-related bookkeeping to do &hellip;. hmmm I wonder what languages I&rsquo;m comparing here? :)</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/03/converging-on-a-correct-design.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932909">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932909"><a href="http://iunknown.com/2006/02/generics-stabilizing.html">Generics stabilizing</a></h3>
					
					
						<ul class="meta">
							<li class="date">1 Mar 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/generics-stabilizing.html" id="comment_link_36932909">2 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932909"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932909">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932909">
	
	<li><a href="http://posterous.com/posts/edit/36932909">Edit</a></li>
  <li><a href="/posts/destroy/36932909" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932909/tags/edit_multiple" data-post-id="36932909" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932909" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932909">
					<div class="copy">
						<p>RubyCLR now supports multi-type generic types such as <code>Dictionary&lt;T, U&gt;</code>. I also changed the nasty <code>cons</code> method to the infinitely cleaner <code>of</code> method. Here&rsquo;s some tests to show the progress:</p>
<div class="CodeRay">
  <div class="code"><pre>def test_create_two_parameter_generic_type
dict = Dictionary.of(Int32, Int32).new
dict.add(1, 1)
dict.add(2, 2)
assert_equal 1, dict[1]
assert_equal 2, dict[2]
end
def test_dictionary_with_string_key
dict = Dictionary.of(System::String, Int32).new
dict['John'] = 42
dict['Ruby'] = 2
assert_equal 42, dict['John']
assert_equal 2, dict['Ruby']
end</pre></div>
</div>

<p>The one thing that I&rsquo;m not happy with right now is being forced to fully qualify the <code>System::String</code> type. I might add some code to special-case that type name in the <code>of</code> method and alias to the <span class="caps">CLR</span> <code>String</code> type from the Ruby <code>String</code> type.</p>
<p>You might be wondering how I implement the generic types. I generate a Ruby shadow class that has a mangled name. For example, <code>Dictionary.of(Int32,Int32)</code>, maps to a Ruby class called <code>Dictionary_generic_Int32_Int32</code>, which is generated the first time <code>of</code> is called. On all subsequent calls, I just look up the Ruby shadow class name. This is also how I handle arrays (you can really think of arrays as a special case of generics).</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/generics-stabilizing.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932901">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932901"><a href="http://iunknown.com/2006/02/generics-in-rubyclr.html">Generics in RubyCLR</a></h3>
					
					
						<ul class="meta">
							<li class="date">1 Mar 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/generics-in-rubyclr.html" id="comment_link_36932901">4 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932901"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932901">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932901">
	
	<li><a href="http://posterous.com/posts/edit/36932901">Edit</a></li>
  <li><a href="/posts/destroy/36932901" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932901/tags/edit_multiple" data-post-id="36932901" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932901" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932901">
					<div class="copy">
						<p>I got a crude implementation of generics up and running in RubyCLR today. It does what these tests say it does, and nothing more :)</p>
<div class="CodeRay">
  <div class="code"><pre>class GenericsTests &lt; TestCase
include System::Collections::Generic
def test_make_generic_type
c = List.cons(Int32)
assert_equal 'System::Collections::Generic::List_generic_Int32', c.name
assert_equal 'System.Collections.Generic.List`1[[System.Int32, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]', c.clr_type.full_name
end
def test_create_generic_type
list = List.cons(Int32).new
assert_equal 'List`1', list.clr_type.name
end
def test_call_generic_type
list = List.cons(Int32).new
list.add(42)
assert_equal 42, list[0]
end
def test_type_conversion_error
assert_raises TypeError do
list = List.cons(Int32).new
list.add('42')
end
end
end</pre></div>
</div>

<p>As for feedback, I&rsquo;m not all that happy with the name <code>cons</code> for the method that creates a generic type. Suggestions would be welcome (but they have to be easy to type, since I&rsquo;m competing with <code>List&lt;Int32&gt;</code> :)</p>
<p>I also ran some crude performance benchmarks for adding 1M integers to each data structure:</p>
<ul>
<li>
<code>ArrayList</code>   = 1.15s</li>
<li>
<code>List&lt;Int32&gt;</code> = 1.00s</li>
<li>Ruby <code>Array</code>  = 0.66s</li>
</ul>
<p>I just wanted to get some order of magnitude estimates of performance. So far I&rsquo;m quite happy with the performance of the bridge. 1M method calls / second is nothing to sneeze at.</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/generics-in-rubyclr.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932900">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932900"><a href="http://iunknown.com/2006/02/ides-and-complexity.html">IDEs and complexity</a></h3>
					
					
						<ul class="meta">
							<li class="date">28 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/ides-and-complexity.html" id="comment_link_36932900">0 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932900"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932900">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932900">
	
	<li><a href="http://posterous.com/posts/edit/36932900">Edit</a></li>
  <li><a href="/posts/destroy/36932900" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932900/tags/edit_multiple" data-post-id="36932900" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932900" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932900">
					<div class="copy">
						<p><a href="http://patricklogan.blogspot.com/2006/02/this-is-enterprise-stuff-look-out.html">Worth repeating</a>:</p>
<blockquote class="posterous_short_quote">
<p>Intellisense and code generation is an isolated developer trick for hiding real complexity and risk.</p>
</blockquote>
<p>Patrick Logan does a great job of capturing why I don&rsquo;t like the complexity of today&rsquo;s IDEs.</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/ides-and-complexity.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932892">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932892"><a href="http://iunknown.com/2006/02/rubyclr-and-auto_dispose.html">RubyCLR and auto_dispose</a></h3>
					
					
						<ul class="meta">
							<li class="date">28 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/rubyclr-and-auto_dispose.html" id="comment_link_36932892">4 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932892"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932892">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932892">
	
	<li><a href="http://posterous.com/posts/edit/36932892">Edit</a></li>
  <li><a href="/posts/destroy/36932892" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932892/tags/edit_multiple" data-post-id="36932892" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932892" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932892">
					<div class="copy">
						<p>In the <a href="http://www.iunknown.com/articles/2006/02/20/second-drop-of-rubyclr">second drop of RubyCLR</a>, I had a broken implementation of <code>auto_dispose</code>, which automatically calls an object&rsquo;s <a href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemIDisposableClassDisposeTopic.asp">Dispose</a> method for you. Fortunately, Gunter Szolderits noticed this problem, and sent me a really lovely implementation that allows for parallel assignment. That means that instead of writing this:</p>
<div class="CodeRay">
  <div class="code"><pre>auto_dispose(D.new) do |dc|
auto_dispose(AD.new) do |adc|
adc.good_method
end
dc.good_method
end</pre></div>
</div>

<p>you can now write this:</p>
<div class="CodeRay">
  <div class="code"><pre>auto_dispose(D.new, AD.new) do |dc, adc|
adc.good_method
dc.good_method
end</pre></div>
</div>

<p>Using the new <a href="http://www.iunknown.com/articles/2006/02/27/interfaces-and-rubyclr">interfaces</a> implementation, the implementation of <code>auto_dispose</code> now looks like this:</p>
<div class="CodeRay">
  <div class="code"><pre>def auto_dispose(*objs)
yield(*objs) if block_given?
ensure
objs.each do |obj|
if obj != nil
disposable = obj.as IDisposable
disposable.dispose if disposable != nil
end
end
end</pre></div>
</div>

<p>Now, is that pretty or what? And I mean both the usage and the implementation!</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/rubyclr-and-auto_dispose.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932886">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932886"><a href="http://iunknown.com/2006/02/interfaces-and-rubyclr.html">Interfaces and RubyCLR</a></h3>
					
					
						<ul class="meta">
							<li class="date">28 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/interfaces-and-rubyclr.html" id="comment_link_36932886">3 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932886"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932886">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932886">
	
	<li><a href="http://posterous.com/posts/edit/36932886">Edit</a></li>
  <li><a href="/posts/destroy/36932886" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932886/tags/edit_multiple" data-post-id="36932886" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932886" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932886">
					<div class="copy">
						<p><a href="http://www.iunknown.com/articles/2006/02/23/rubyclr-interfaces">My earlier implementation of interfaces</a> for RubyCLR was incomplete. I didn&rsquo;t have code to let you test whether an object implemented the interface requested. There are a couple of approaches that you can use to solve this problem: via reflection at runtime and via a shim method that &ldquo;knows&rdquo; about all of the interfaces that an object implements.</p>
<p>I chose the second option: implementing two new methods <code>is</code> and <code>as</code>. The goal is to eventually provide the same semantics as the C# <a href="http://msdn.microsoft.com/library/en-us/csref/html/vclrfispg.asp">is</a> and <a href="http://msdn.microsoft.com/library/en-us/csref/html/vclrfas.asp">as</a> operators. You can use the <code>is</code> method to test whether an object implements an interface, and you can use the <code>as </code> operator to return a reference to that interface.</p>
<p>I use Reflection to enumerate all of the interfaces of a class and bake in all of those interface references by recording the <a href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemruntimetypehandleclasstopic.asp">RuntimeTypeHandle</a> for each one of the interfaces. This approach gives me superior performance  since I avoid using Reflection on all but the first call to the <code>is</code> or <code>as</code> methods of a type.</p>
<p>The ultimate goal is that <code>is</code> and <code>as</code> will match the semantics of <code>is</code> and <code>as</code> in C#. Currently I&rsquo;m missing support for the boxing and unboxing scenarios as well as the super-type scenario.</p>
<p>Here&rsquo;s the unit test for the <code>is</code> method:</p>
<div class="CodeRay">
  <div class="code"><pre>def test_is
m = System::Data::DataSet.new
assert m.is?(System::Data::DataSet)
assert m.is?(IComponent)
assert m.is?(IDisposable)
assert m.is?(IServiceProvider)
assert m.is?(IListSource)
assert m.is?(System::Xml::Serialization::IXmlSerializable)
assert m.is?(ISupportInitializeNotification)
assert m.is?(ISupportInitialize)
assert m.is?(System::Runtime::Serialization::ISerializable)
assert !m.is?(System::Data::IColumnMapping)
end</pre></div>
</div>

<p>and a simpler test for the <code>as</code> method:</p>
<div class="CodeRay">
  <div class="code"><pre>def test_as
a = ArrayList.new
a.add(1)
e = a.as(IEnumerable).get_enumerator.as(IEnumerator)
assert e.move_next
assert 1, e.current
assert !e.move_next
assert_equal nil, a.as(IComponent)
end</pre></div>
</div>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/interfaces-and-rubyclr.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932884">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932884"><a href="http://iunknown.com/2006/02/native-ruby-array-data-binding.html">Native Ruby array data binding</a></h3>
					
					
						<ul class="meta">
							<li class="date">24 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/native-ruby-array-data-binding.html" id="comment_link_36932884">3 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932884"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932884">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932884">
	
	<li><a href="http://posterous.com/posts/edit/36932884">Edit</a></li>
  <li><a href="/posts/destroy/36932884" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932884/tags/edit_multiple" data-post-id="36932884" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932884" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932884">
					<div class="copy">
						<p>I spent some time today hacking out an experimental implementation of native Ruby array data binding. It works by using a <span class="caps">CLR</span> helper class called <code>DataBinder</code> that implements <code>IList</code>, and calls back to Ruby using delegates to retrieve the data. This gives the following usage model:</p>
<div class="CodeRay">
  <div class="code"><pre>names = ['John', 'Paul', 'George', Ringo']
list_box.data_source = names.make_bindable</pre></div>
</div>

<p>To make this work, I inject a <code>make_bindable</code> method into the <code>Array</code> class:</p>
<div class="CodeRay">
  <div class="code"><pre>def make_bindable
binder = DataBinder.new
binder.get_data do |sender, args|
args.current_object = self[args.index]
end
binder.get_count do |sender, args|
args.count = self.length
end
binder
end</pre></div>
</div>

<p>Thoughts? Does this feel good?</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/native-ruby-array-data-binding.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932881">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932881"><a href="http://iunknown.com/2006/02/rubyclr-is-all-about-choice.html">RubyCLR is all about choice</a></h3>
					
					
						<ul class="meta">
							<li class="date">23 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/rubyclr-is-all-about-choice.html" id="comment_link_36932881">5 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932881"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932881">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932881">
	
	<li><a href="http://posterous.com/posts/edit/36932881">Edit</a></li>
  <li><a href="/posts/destroy/36932881" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932881/tags/edit_multiple" data-post-id="36932881" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932881" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932881">
					<div class="copy">
						<p>Look at what I got working this morning:</p>
<div class="CodeRay">
  <div class="code"><pre>def test_enumerator
a = ArrayList.new
a.Add(1)
a.Add(2)
a.Add(3)
e = a.get_interface(IEnumerable).GetEnumerator.get_interface(IEnumerator)
assert e.MoveNext
assert 1, e.Current
assert e.MoveNext
assert 2, e.Current
assert e.MoveNext
assert 3, e.Current
assert !e.MoveNext
end</pre></div>
</div>

<p>vs.</p>
<div class="CodeRay">
  <div class="code"><pre>def test_enumerator
a = ArrayList.new
a.add(1)
a.add(2)
a.add(3)
e = a.get_interface(IEnumerable).get_enumerator.get_interface(IEnumerator)
assert e.move_next
assert 1, e.current
assert e.move_next
assert 2, e.current
assert e.move_next
assert 3, e.current
assert !e.move_next
end</pre></div>
</div>

<p>By the way, both work in the same app.</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/rubyclr-is-all-about-choice.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932877">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932877"><a href="http://iunknown.com/2006/02/rubyclr-interfaces.html">RubyCLR Interfaces</a></h3>
					
					
						<ul class="meta">
							<li class="date">23 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/rubyclr-interfaces.html" id="comment_link_36932877">4 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932877"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932877">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932877">
	
	<li><a href="http://posterous.com/posts/edit/36932877">Edit</a></li>
  <li><a href="/posts/destroy/36932877" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932877/tags/edit_multiple" data-post-id="36932877" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932877" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932877">
					<div class="copy">
						<p>A notable feature that was missing from the <a href="http://www.iunknown.com/articles/2006/02/20/second-drop-of-rubyclr">second drop of RubyCLR</a> was support for interfaces. Also, I was missing support for integrating .NET Reflection with Ruby Reflection.</p>
<p>I spent some time yesterday adding these features to RubyCLR. This is what I wound up with:</p>
<div class="CodeRay">
  <div class="code"><pre>def test_enumerator
a = ArrayList.new
a.Add(1)
a.Add(2)
a.Add(3)
enum = a.get_interface('System.Collections.IEnumerable')
e    = enum.GetEnumerator.get_interface('System.Collections.IEnumerator')
assert e.MoveNext
assert 1, e.Current
assert e.MoveNext
assert 2, e.Current
assert e.MoveNext
assert 3, e.Current
assert !e.MoveNext
end</pre></div>
</div>

<p>As you could imagine, I&rsquo;m going to add explicit support for an <code>each</code> method on enumerable objects.</p>
<p>Implementing <code>get_interface</code> turned out to be easier than expected:</p>
<div class="CodeRay">
  <div class="code"><pre>def get_interface(name)
klass = self.class
create_safe_ruby_instance_method(klass, 'get_interface') do
ldstr        name.to_s
ld_this      klass
call         'static Marshal::ToRubyObjectAsInterface(String, Object)'
ret
end
get_interface(name)
end</pre></div>
</div>

<p>The C++ <code>ToRubyObjectAsInterface</code> simply thunks to some existing code in the C++ part of the RubyCLR runtime.</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/rubyclr-interfaces.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
			<li class="post-item clearfix" id="post_36932874">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_36932874"><a href="http://iunknown.com/2006/02/google-calc.html">Google Calc</a></h3>
					
					
						<ul class="meta">
							<li class="date">22 Feb 2006</li>
							<li class="comments"><a href="http://iunknown.com/2006/02/google-calc.html" id="comment_link_36932874">1 Response</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="36932874"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_36932874">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="36932874">
	
	<li><a href="http://posterous.com/posts/edit/36932874">Edit</a></li>
  <li><a href="/posts/destroy/36932874" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/36932874/tags/edit_multiple" data-post-id="36932874" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=36932874" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_36932874">
					<div class="copy">
						<p>Justin just posted an awesome sample that uses RubyCLR to the ruby-talk list:</p>
<p><div class='posterousGalleryMainDiv p_embed p_image_embed' data-posterous-file-list='%5B%7B%22large%22%3A%22http%3A%2F%2Fgetfile8.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-fueh%2FewqnlefHjnkfssDmlnzvxAEDpuftArjmCaiHwAroFqExEvwctdIJuHiyvamv%2Fmedia_httpstaticflick_nqfJr.png%22%2C%22originalWidth%22%3A%22220%22%2C%22largeWidth%22%3A%22220%22%2C%22thumb%22%3A%22http%3A%2F%2Fgetfile4.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-fueh%2FewqnlefHjnkfssDmlnzvxAEDpuftArjmCaiHwAroFqExEvwctdIJuHiyvamv%2Fmedia_httpstaticflick_nqfJr.png.thumb.png%22%2C%22originalHeight%22%3A%22200%22%2C%22largeHeight%22%3A%22200%22%2C%22thumbWidth%22%3A%2236%22%2C%22height%22%3A%22200%22%2C%22main%22%3A%22http%3A%2F%2Fgetfile9.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-fueh%2FewqnlefHjnkfssDmlnzvxAEDpuftArjmCaiHwAroFqExEvwctdIJuHiyvamv%2Fmedia_httpstaticflick_nqfJr.png.scaled500.png%22%2C%22thumbHeight%22%3A%2236%22%2C%22originalSize%22%3A%227%22%2C%22original%22%3A%22http%3A%2F%2Fgetfile8.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-fueh%2FewqnlefHjnkfssDmlnzvxAEDpuftArjmCaiHwAroFqExEvwctdIJuHiyvamv%2Fmedia_httpstaticflick_nqfJr.png%22%2C%22width%22%3A%22220%22%7D%5D' data-posterous-image-gallery-initialized='false' data-posterous-image-gallery='true' data-posterous-options='%7B%22zipFile%22%3Anull%2C%22zipFileSize%22%3Anull%2C%22external_url%22%3Anull%2C%22showDownload%22%3Atrue%2C%22url_slug%22%3A%22google-calc%22%7D'>
<img alt="Media_httpstaticflick_nqfjr" height="200" src="http://getfile9.posterous.com/getfile/files.posterous.com/import-fueh/ewqnlefHjnkfssDmlnzvxAEDpuftArjmCaiHwAroFqExEvwctdIJuHiyvamv/media_httpstaticflick_nqfJr.png.scaled500.png" width="220" />

</div>
</p>
<p>I had no idea that Google&rsquo;s calculator could work with fortnights as a unit!</p>
<p>Here&rsquo;s a link to the <a href="http://groups.google.com/group/comp.lang.ruby/browse_thread/thread/197f2650a1ca9f25/b7ea0676a15fa46c?lnk=st&amp;q=rubyclr&amp;rnum=1&amp;hl=en#b7ea0676a15fa46c">complete source</a> to his app.</p>
<p>The more people I can get to use it, the sooner we&rsquo;ll all have a production-quality release to work with!</p>
<p>Keep those samples coming!</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2006/02/google-calc.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
				</div>	
				
			</li>		
		
		<li class="pagination">
			<div class="pagination"><a href="http://iunknown.com?page=29" class="prev_page" rel="prev">&laquo; Previous</a> <a href="http://iunknown.com?page=1" rel="start">1</a> <a href="http://iunknown.com?page=2">2</a> <span class="gap">&hellip;</span> <a href="http://iunknown.com?page=26">26</a> <a href="http://iunknown.com?page=27">27</a> <a href="http://iunknown.com?page=28">28</a> <a href="http://iunknown.com?page=29" rel="prev">29</a> <span class="current">30</span> <a href="http://iunknown.com?page=31" rel="next">31</a> <a href="http://iunknown.com?page=32">32</a> <a href="http://iunknown.com?page=33">33</a> <a href="http://iunknown.com?page=34">34</a> <span class="gap">&hellip;</span> <a href="http://iunknown.com?page=37">37</a> <a href="http://iunknown.com?page=38">38</a> <a href="http://iunknown.com?page=31" class="next_page" rel="next">Next &raquo;</a></div> 
		</li>		
	</ul>
</div>

<div id="footer-container">
	<div id="footer">
	
		<ul class="three-column clearfix">
    		<li class="column clearfix">
				
                    <h4>About</h4>
                    <p>I create software tools for scientists and engineers in the Technical Computing Group at Microsoft. Before that, I was a founding member of the IronRuby team.</p>
                    <div class="siteviews">128516 Views</div>
				
                
			</li>
			<li class="column">
            
                
            
				<h4>Get Updates</h4>
          <div class="subscribe_to_mysite clearfix">
              
              <div><a href="http://feeds.feedburner.com/LessIsBetter" class="subscribe_link" target="_blank">Subscribe via RSS</a> </div>
              <div class="social-bookmarks">
                  <a href="http://twitter.com/john_lam" class="p_external_site p_twitter" rel="me">Twitter</a>
              </div>
          </div>

			</li>
            <li class="column last">
                
                
              

            </li>
		</ul>
		
		<form class="search-form" method="get">
            <input name="sort" value="" type="hidden" />
            <input name="search" class="search" id="searchbox" value="" type="text" />
            <input class="search_button" value="Search" type="submit" />
        </form>
        
              
            
	
	</div>
</div>



  
      <script type="text/javascript">
    	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    	</script>
    	<script type="text/javascript">
    	var pageTracker = _gat._getTracker("UA-4054156-1");
    	pageTracker._setDomainName("none");
    	pageTracker._setAllowLinker(true);
    	pageTracker._setAllowHash(false);
    	pageTracker._initData();
    	pageTracker._trackPageview();
    	</script>
    
  
  <!-- Quantcast Tag --> 
  <script type="text/javascript">
    var _qevents = _qevents || [];
    _qevents.push( { qacct:"p-16ewveTurfCCM"} );
  </script>
  <script type="text/javascript" src="//edge.quantserve.com/quant.js" async></script>
  <noscript>
  <div style="display: none;"><img src="https://pixel.quantserve.com/pixel/p-16ewveTurfCCM.gif" height="1" width="1" alt="Quantcast"/></div>
  </noscript>
  <!-- End Quantcast tag -->


	<script type="text/javascript">
		try {
			var pageTrackerUser = _gat._getTracker("UA-12323255-1");
			pageTrackerUser._trackPageview();
		} catch (err) {}
	</script>


<script src="http://www.scribd.com/javascripts/view.js" type="text/javascript"></script>
<script src="/bundles/sites_views.js" type="text/javascript"></script>
<script src="/bundles/sites.js" type="text/javascript"></script>
<script src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js" type="text/javascript"></script>

<script>
	var fbid_site_owner = 1;
</script>












<div class="posterous_ojs" data-posterous-twitter-oauth="true" data-posterous-post-ids="%7B%2236932884%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Fnative-ruby-array-data-binding.html%22%2C%2236932874%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Fgoogle-calc.html%22%2C%2236932886%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Finterfaces-and-rubyclr.html%22%2C%2236932909%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Fgenerics-stabilizing.html%22%2C%2236932877%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Frubyclr-interfaces.html%22%2C%2236932900%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Fides-and-complexity.html%22%2C%2236932901%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Fgenerics-in-rubyclr.html%22%2C%2236932881%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Frubyclr-is-all-about-choice.html%22%2C%2236932892%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F02%2Frubyclr-and-auto_dispose.html%22%2C%2236932913%22%3A%22http%3A%2F%2Fiunknown.com%2F2006%2F03%2Fconverging-on-a-correct-design.html%22%7D" data-posterous-redirect-url="http://posterous.com/oauth/init_oauth_and_redirect/?ssod=iunknown.com&oauth_provider_type="></div>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js" defer></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<div style="display: none;"><iframe src="http://posterous.com/analytics_tracker" style="height: 1px; width: 1px;"></iframe></div></body>
</html>



