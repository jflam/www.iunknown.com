<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
      <meta http-equiv="X-UA-Compatible" content="chrome=1" />
      <meta name="width" content="500" />
      <meta name="generator" content="Posterous" />
      <script src="/javascripts/vendor/modernizr.custom.09241.js?1367517938" type="text/javascript"></script>
      <!--[if lt IE 9]>
        <script src="/javascripts/innershiv.js?1367517938" type="text/javascript"></script>
      <![endif]-->
      <link href="/bundles/posts.css" media="screen" rel="stylesheet" type="text/css" />
      <!--[if lt IE 9]>
        <link href="/bundles/ie.css" media="screen" rel="stylesheet" type="text/css" />
      <![endif]-->
      <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/LessIsBetter"/>
      <meta name="medium" content="image" /><link rel="image_src" href="http://getfile9.posterous.com/getfile/files.posterous.com/import-evce/vgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI/media_httpfarm1static_HhwqF.jpg.thumb100.jpg" />
      <script type="text/javascript">
//<![CDATA[
window._token = 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='; beforeload = (new Date()).getTime(); pagetype = 'show';
//]]>
</script>
      <script src="/bundles/sites_initialization.js" type="text/javascript"></script>
      <script type="text/javascript">
//<![CDATA[
var $j = jQuery.noConflict();
//]]>
</script>
      <script type="text/javascript">
//<![CDATA[
var POSTEROUS_HOSTNAME = 'posterous.com'
//]]>
</script>
      <script data-post-data="%7B%22post_id%22%3A37114907%2C%22post_is_private%22%3Afalse%2C%22user_id%22%3A931119%2C%22post_url_slug%22%3A%22modularity-ruby-and-doing-the-right-thing%22%7D" data-posterous-deferred-content-url="http://iunknown.com/posts/deferred_content.jsonp" data-posts-data="%5B%7B%22post_id%22%3A37114907%2C%22post_is_private%22%3Afalse%2C%22user_id%22%3A931119%2C%22post_url_slug%22%3A%22modularity-ruby-and-doing-the-right-thing%22%7D%5D" id="posterous_initialization_script" src="/javascripts/initialize.js?1367517938" type="text/javascript"></script>
      
    <script src="/bundles/tags.js" type="text/javascript"></script><link rel="canonical" href="http://iunknown.com/2007/05/modularity-ruby-and-doing-the-right-thing.html" />
<link href="/themes/light-matter/post-style.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 8]>
	<link href="/themes/light-matter/ie-style.css" rel="stylesheet" type="text/css" />
<![endif]-->
<title>Modularity, Ruby and Doing the Right Thing - John Lam on Software</title>
</head>
<body><div class="posterous_site_data" data-post-id="37114907" data-posterous-hostname="posterous.com" data-show-type="post" data-site-id="2278433" data-site-is-private="false" data-site-location="false" data-site-type="posterous" data-slug-id="modularity-ruby-and-doing-the-right-thing" data-user-id="931119"></div><div class="posterous_ojs" data-posterous-admin-box="true"></div><div class="posterousPrivateBox">
	
	
</div>
      <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId  : '6694405826',
              status : true, // check login status
              cookie : true, // enable cookies to allow the server to access the session
              xfbml  : true, // parse XFBML
              oauth  : true

            });
            
          };

          (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = 'http://connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
          }());
        </script>
    
  <div id="pbar">
        				<noscript>
  <div id="posterousbar_nojs">
    <a href="http://posterous.com/"><img src="/images/header/yellow.png" alt="Posterous" /></a>
  </div>
</noscript>
              </div>
<div id="header-container">
	<div id="header">
		
		<h1 class="site-name"><a href="http://iunknown.com">John Lam on Software</a></h1>
		<p class="site-description"></p>
	</div>
</div>

                
	<div id="pages-container">
		<div id="pages">
            <ul>
            	
                
                    <li><a href="http://about.me/jlam" title="About me" class="">About me</a></li>
                
              
            </ul>
		</div>
	</div>

              
<div id="container">
	<ul class="post-list clearfix">
		
			<li class="post-item clearfix" id="post_37114907">
				<div class="title-block">
					
						<h3 class="title" id="posttitle_37114907"><a href="http://iunknown.com/2007/05/modularity-ruby-and-doing-the-right-thing.html">Modularity, Ruby and Doing the Right Thing</a></h3>
					
					
						<ul class="meta">
							<li class="date">14 May 2007</li>
							<li class="comments"><a href="http://iunknown.com/2007/05/modularity-ruby-and-doing-the-right-thing.html" id="comment_link_37114907">15 Responses</a></li>
							<li class="views"><div class="posterous_ojs" data-posterous-view-count="true" data-posterous-post-id="37114907"></div>&nbsp;views</li>
                            
                
              
						</ul>
					
					
					<div class="editbox clearfix" id="editunit_37114907">
						
        				
                  <ul class="mini_commands posterous_edit_box posterous_edit_box_hidden" data-posterous-edit-box="true" data-posterous-post-id="37114907">
	
	<li><a href="http://posterous.com/posts/edit/37114907">Edit</a></li>
  <li><a href="/posts/destroy/37114907" onclick="if (confirm('Are you sure you want to delete this post?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'K5qluXl5HOIU9bWdq9oJYrEuVokj7nLG7aYeXTLdHqg='); f.appendChild(s);f.submit(); };return false;">Delete</a></li>
	<li><a href="http://posterous.com/posts/37114907/tags/edit_multiple" data-post-id="37114907" data-posterous-modal="true" data-posterous-tag-form="true">Tags</a></li>
	
	  <li><a href="//posterous.com/autopost/crosspost?post_id=37114907" data-posterous-modal="true">Autopost</a>
	
</ul>

                
                
					</div>
					
				</div>
				<div class="post-content" id="postbox_37114907">
					<div class="copy">
						<p><div class='posterousGalleryMainDiv p_embed p_image_embed' data-posterous-file-list='%5B%7B%22large%22%3A%22http%3A%2F%2Fgetfile4.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-evce%2FvgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI%2Fmedia_httpfarm1static_HhwqF.jpg.scaled1000.jpg%22%2C%22originalWidth%22%3A%22500%22%2C%22largeWidth%22%3A%22500%22%2C%22thumb%22%3A%22http%3A%2F%2Fgetfile0.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-evce%2FvgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI%2Fmedia_httpfarm1static_HhwqF.jpg.thumb.jpg%22%2C%22originalHeight%22%3A%22375%22%2C%22largeHeight%22%3A%22375%22%2C%22thumbWidth%22%3A%2236%22%2C%22height%22%3A%22375%22%2C%22main%22%3A%22http%3A%2F%2Fgetfile2.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-evce%2FvgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI%2Fmedia_httpfarm1static_HhwqF.jpg.scaled500.jpg%22%2C%22thumbHeight%22%3A%2236%22%2C%22originalSize%22%3A%22154%22%2C%22original%22%3A%22http%3A%2F%2Fgetfile8.posterous.com%2Fgetfile%2Ffiles.posterous.com%2Fimport-evce%2FvgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI%2Fmedia_httpfarm1static_HhwqF.jpg%22%2C%22width%22%3A%22500%22%7D%5D' data-posterous-image-gallery-initialized='false' data-posterous-image-gallery='true' data-posterous-options='%7B%22zipFile%22%3Anull%2C%22zipFileSize%22%3Anull%2C%22external_url%22%3A%22http%3A%2F%2Fwww.flickr.com%2Fphotos%2Fjohn_lam%2F493308712%2F%22%2C%22showDownload%22%3Atrue%2C%22url_slug%22%3A%22modularity-ruby-and-doing-the-right-thing%22%7D'>
<img alt="Media_httpfarm1static_hhwqf" height="375" src="http://getfile2.posterous.com/getfile/files.posterous.com/import-evce/vgjeeJhjlHjJxdJtoaCfDGbamizwFqAphdfjcCgJgcgkhxlhwlBxJrCHyGgI/media_httpfarm1static_HhwqF.jpg.scaled500.jpg" width="500" />

</div>
  </p><p>It seems like we stirred up some controversy with <a href="http://www.iunknown.com/2007/05/postdemo_hangov.html">these lines of code in our demo</a>:</p> <p>JS = require 'foo.js'<br />...<br />JS.initialize</p> <p>Let's&nbsp;be clear about what this code does: it creates a&nbsp;ScriptModule (a DLR type) that represents the execution context of the foo.js code, and assigns it to the JS constant. The JS.initialize line calls the initialize method in foo.js. This is a user-defined method, and not some kind of DLR initialization thing. </p> <p>We debated the idea of using require to import foreign modules in my office for a very short period of time before checking in the change. It seemed like a natural thing to do - monkey-patch the require method so that we can import foreign modules into IronRuby.</p> <p>Nobody has argued that importing foreign modules into IronRuby is a bad idea.[1] Rather, I think that folks have taken issue with using require as the mechanism for doing so.</p> <p>Point taken. We will have a different mechanism for doing so in the future. </p> <p>But this brings up an important meta-level issue: our commitment to doing the right thing. It seems that our intentions in this area have been called into question. We have a fairly straightforward task here: to make a CLR implementation of the Ruby language that is as compatible as we can make it. So when we have a design decision to make, it's driven by "how does the native Ruby implementation&nbsp;handle it"?&nbsp;</p> <p>We here on the IronRuby team are under no illusion that we will be 100% compatible with the existing Ruby 1.8.x branch. But we will get as close as we can and bend over backwards to ensure that it is so. And I expect that you guys will keep us honest in this regard when it seems like we made a bad design decision.[2] </p> <p>Pure Ruby code should just work, and code that depends on native platform libraries will have to be ported (either by us porting the native platform libraries or by folks modifying the code to work with our native platform libraries aka the Framework Class Libraries). </p> <p>Please do speak up when we post code frags, demos (and eventually source). We're really interested in what you have to say !</p> <p>[1]&nbsp;Keep in mind that we wanted to demo something interesting at MIX (cross-language interop) and that using Ruby (the least mature of our language implementations) as the glue to bind other code together seemed to be the right thing to do. However, at that time we couldn't solicit input from the community since we were in stealth mode.</p> <p>[2] While I don't think that overloading require was a bad design decision (nobody has given us a concrete example that shows where this breaks their app / library), it's controversial enough and the fix simple enough to do that I have no problem doing it.</p>
						
					</div>

						<ul class="social">
							<li class="tweet">
								
              
            
							</li>
							<li class="like">
								<fb:like href="http://iunknown.com/2007/05/modularity-ruby-and-doing-the-right-thing.html" layout="button_count"></fb:like> 
							</li>
						</ul>
								
                    
                        
              
                
              
            
                    
				</div>	
				
					
              <aside class="p_responses light">
                
            
          
            
              <nav class='p_response_widget'>
<ul class='clearfix'>
<li class='p_responses_link'><a href="/responses/recent?post_id=37114907" data-posterous-response-count="37114907" data-response-post-id="37114907" title="View responses to this post"><strong>15</strong> responses</a></li>
<li class='p_like_link'><a href="/likes/create?like_type=post&amp;post_id=37114907" class="like_post" data-like-url="/likes/create?like_type=post&amp;post_id=37114907" data-posterous-like-button-for-post-id="37114907" data-posterous-like-text="Like this post" data-posterous-like="true" data-posterous-unlike-text="Unlike this post" data-unlike-url="/likes/delete?like_type=post&amp;post_id=37114907" rel="nofollow" title="Like this post"><div class='p_like_icon'></div><div class='p_unlike_icon' style='display:none'></div><span>Like</span></a></li>
<li class='p_comment_link'><a href="/responses/recent?post_id=37114907" data-comment-post-id="37114907" title="Comment on this post"><div>Comment</div></a></li>
</ul>
</nav>

          		<esi:include src="http://posterous.com/responses?post_id=37114907&user_id=931119" />
          		<div class="posterous_ojs" data-posterous-new-comment-form="true"></div>
            
          
              </aside> 
        		
				
			</li>		
		
		<li class="pagination">
			 
		</li>		
	</ul>
</div>

<div id="footer-container">
	<div id="footer">
	
		<ul class="three-column clearfix">
    		<li class="column clearfix">
				
                
                    
              
            
                
			</li>
			<li class="column">
            
                
            
				<h4>Get Updates</h4>
          <div class="subscribe_to_mysite clearfix">
              
              <div><a href="http://feeds.feedburner.com/LessIsBetter" class="subscribe_link" target="_blank">Subscribe via RSS</a> </div>
              <div class="social-bookmarks">
                  <a href="http://twitter.com/john_lam" class="p_external_site p_twitter" rel="me">Twitter</a>
              </div>
          </div>

			</li>
            <li class="column last">
                
                
              

            </li>
		</ul>
		
		<form class="search-form" method="get">
            <input name="sort" value="" type="hidden" />
            <input name="search" class="search" id="searchbox" value="" type="text" />
            <input class="search_button" value="Search" type="submit" />
        </form>
        
	
	</div>
</div>



  
      <script type="text/javascript">
    	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    	</script>
    	<script type="text/javascript">
    	var pageTracker = _gat._getTracker("UA-4054156-1");
    	pageTracker._setDomainName("none");
    	pageTracker._setAllowLinker(true);
    	pageTracker._setAllowHash(false);
    	pageTracker._initData();
    	pageTracker._trackPageview();
    	</script>
    
  
  <!-- Quantcast Tag --> 
  <script type="text/javascript">
    var _qevents = _qevents || [];
    _qevents.push( { qacct:"p-16ewveTurfCCM"} );
  </script>
  <script type="text/javascript" src="//edge.quantserve.com/quant.js" async></script>
  <noscript>
  <div style="display: none;"><img src="https://pixel.quantserve.com/pixel/p-16ewveTurfCCM.gif" height="1" width="1" alt="Quantcast"/></div>
  </noscript>
  <!-- End Quantcast tag -->


	<script type="text/javascript">
		try {
			var pageTrackerUser = _gat._getTracker("UA-12323255-1");
			pageTrackerUser._trackPageview();
		} catch (err) {}
	</script>


<script src="http://www.scribd.com/javascripts/view.js" type="text/javascript"></script>
<script src="/bundles/sites_views.js" type="text/javascript"></script>
<script src="/bundles/sites.js" type="text/javascript"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js" defer></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script>
	var fbid_site_owner = 1;
</script>



<div class="posterous_ojs" data-posterous-twitter-oauth="true" data-posterous-post-ids="%7B%2237114907%22%3A%22http%3A%2F%2Fiunknown.com%2F2007%2F05%2Fmodularity-ruby-and-doing-the-right-thing.html%22%7D" data-posterous-redirect-url="http://posterous.com/oauth/init_oauth_and_redirect/?ssod=iunknown.com&oauth_provider_type="></div>
<script src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js" type="text/javascript"></script>
<iframe src="http://posterous.com/analytics_tracker" style="height: 1px; width: 1px; display: none;"></iframe>

      <script type="text/javascript">
        null_fn = function () {};
        var mpmetrics = { track_links: null_fn, track: null_fn, track_funnel: null_fn, register: null_fn, register_once: null_fn, register_funnel: null_fn };
      </script>
    </body>
</html>


